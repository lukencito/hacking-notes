<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>2 Pentest Overview | Hacking Notes</title>
  <meta name="description" content="2 Pentest Overview | Hacking Notes" />
  <meta name="generator" content="bookdown 0.41 and GitBook 2.6.7" />

  <meta property="og:title" content="2 Pentest Overview | Hacking Notes" />
  <meta property="og:type" content="book" />
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="2 Pentest Overview | Hacking Notes" />
  
  
  

<meta name="author" content="notluken" />


<meta name="date" content="2024-10-30" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="index.html"/>
<link rel="next" href="network-enumeration.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">hacking</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Whoami</a></li>
<li class="chapter" data-level="2" data-path="pentest-overview.html"><a href="pentest-overview.html"><i class="fa fa-check"></i><b>2</b> Pentest Overview</a>
<ul>
<li class="chapter" data-level="2.1" data-path="pentest-overview.html"><a href="pentest-overview.html#penetration-testing-overview"><i class="fa fa-check"></i><b>2.1</b> Penetration Testing Overview</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="pentest-overview.html"><a href="pentest-overview.html#risk-management"><i class="fa fa-check"></i><b>2.1.1</b> Risk Management</a></li>
<li class="chapter" data-level="2.1.2" data-path="pentest-overview.html"><a href="pentest-overview.html#vulnerability-assessments"><i class="fa fa-check"></i><b>2.1.2</b> Vulnerability Assessments</a></li>
<li class="chapter" data-level="2.1.3" data-path="pentest-overview.html"><a href="pentest-overview.html#testing-methods"><i class="fa fa-check"></i><b>2.1.3</b> Testing Methods</a></li>
<li class="chapter" data-level="2.1.4" data-path="pentest-overview.html"><a href="pentest-overview.html#types-of-penetration-testing"><i class="fa fa-check"></i><b>2.1.4</b> Types of Penetration Testing</a></li>
<li class="chapter" data-level="2.1.5" data-path="pentest-overview.html"><a href="pentest-overview.html#types-of-testing-environments"><i class="fa fa-check"></i><b>2.1.5</b> Types of Testing Environments</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="pentest-overview.html"><a href="pentest-overview.html#laws-and-regulations"><i class="fa fa-check"></i><b>2.2</b> Laws and Regulations</a>
<ul>
<li class="chapter" data-level="2.2.1" data-path="pentest-overview.html"><a href="pentest-overview.html#usa"><i class="fa fa-check"></i><b>2.2.1</b> USA</a></li>
<li class="chapter" data-level="2.2.2" data-path="pentest-overview.html"><a href="pentest-overview.html#europe"><i class="fa fa-check"></i><b>2.2.2</b> Europe</a></li>
<li class="chapter" data-level="2.2.3" data-path="pentest-overview.html"><a href="pentest-overview.html#uk"><i class="fa fa-check"></i><b>2.2.3</b> UK</a></li>
<li class="chapter" data-level="2.2.4" data-path="pentest-overview.html"><a href="pentest-overview.html#india"><i class="fa fa-check"></i><b>2.2.4</b> India</a></li>
<li class="chapter" data-level="2.2.5" data-path="pentest-overview.html"><a href="pentest-overview.html#china"><i class="fa fa-check"></i><b>2.2.5</b> China</a></li>
<li class="chapter" data-level="2.2.6" data-path="pentest-overview.html"><a href="pentest-overview.html#precautionary-measures-during-penetration-tests"><i class="fa fa-check"></i><b>2.2.6</b> Precautionary Measures during Penetration Tests</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="pentest-overview.html"><a href="pentest-overview.html#pre-engagement"><i class="fa fa-check"></i><b>2.3</b> Pre-Engagement</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="pentest-overview.html"><a href="pentest-overview.html#scoping-questionnaire"><i class="fa fa-check"></i><b>2.3.1</b> Scoping Questionnaire</a></li>
<li class="chapter" data-level="2.3.2" data-path="pentest-overview.html"><a href="pentest-overview.html#pre-engagement-meeting"><i class="fa fa-check"></i><b>2.3.2</b> Pre-Engagement Meeting</a></li>
<li class="chapter" data-level="2.3.3" data-path="pentest-overview.html"><a href="pentest-overview.html#kick-off-meeting"><i class="fa fa-check"></i><b>2.3.3</b> Kick-Off Meeting</a></li>
<li class="chapter" data-level="2.3.4" data-path="pentest-overview.html"><a href="pentest-overview.html#contractors-agreement"><i class="fa fa-check"></i><b>2.3.4</b> Contractors Agreement</a></li>
<li class="chapter" data-level="2.3.5" data-path="pentest-overview.html"><a href="pentest-overview.html#setting-up"><i class="fa fa-check"></i><b>2.3.5</b> Setting Up</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="pentest-overview.html"><a href="pentest-overview.html#information-gathering"><i class="fa fa-check"></i><b>2.4</b> Information Gathering</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="pentest-overview.html"><a href="pentest-overview.html#open-source-intelligence"><i class="fa fa-check"></i><b>2.4.1</b> Open-Source Intelligence</a></li>
<li class="chapter" data-level="2.4.2" data-path="pentest-overview.html"><a href="pentest-overview.html#infrastructure-enumeration"><i class="fa fa-check"></i><b>2.4.2</b> Infrastructure Enumeration</a></li>
<li class="chapter" data-level="2.4.3" data-path="pentest-overview.html"><a href="pentest-overview.html#service-enumeration"><i class="fa fa-check"></i><b>2.4.3</b> Service Enumeration</a></li>
<li class="chapter" data-level="2.4.4" data-path="pentest-overview.html"><a href="pentest-overview.html#host-enumeration"><i class="fa fa-check"></i><b>2.4.4</b> Host Enumeration</a></li>
<li class="chapter" data-level="2.4.5" data-path="pentest-overview.html"><a href="pentest-overview.html#pillaging"><i class="fa fa-check"></i><b>2.4.5</b> Pillaging</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="pentest-overview.html"><a href="pentest-overview.html#vulnerability-assessment"><i class="fa fa-check"></i><b>2.5</b> Vulnerability Assessment</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="pentest-overview.html"><a href="pentest-overview.html#vulnerability-research-and-analysis"><i class="fa fa-check"></i><b>2.5.1</b> Vulnerability Research and Analysis</a></li>
<li class="chapter" data-level="2.5.2" data-path="pentest-overview.html"><a href="pentest-overview.html#assessment-of-possible-attack-vectors"><i class="fa fa-check"></i><b>2.5.2</b> Assessment of Possible Attack Vectors</a></li>
<li class="chapter" data-level="2.5.3" data-path="pentest-overview.html"><a href="pentest-overview.html#the-return"><i class="fa fa-check"></i><b>2.5.3</b> The Return</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="pentest-overview.html"><a href="pentest-overview.html#explotation"><i class="fa fa-check"></i><b>2.6</b> Explotation</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="pentest-overview.html"><a href="pentest-overview.html#prioritization-of-possible-attacks"><i class="fa fa-check"></i><b>2.6.1</b> Prioritization of Possible Attacks</a></li>
<li class="chapter" data-level="2.6.2" data-path="pentest-overview.html"><a href="pentest-overview.html#preparation-for-the-attack"><i class="fa fa-check"></i><b>2.6.2</b> Preparation for the Attack</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="pentest-overview.html"><a href="pentest-overview.html#post-explotation"><i class="fa fa-check"></i><b>2.7</b> Post-Explotation</a>
<ul>
<li class="chapter" data-level="2.7.1" data-path="pentest-overview.html"><a href="pentest-overview.html#evasive-testing"><i class="fa fa-check"></i><b>2.7.1</b> Evasive Testing</a></li>
<li class="chapter" data-level="2.7.2" data-path="pentest-overview.html"><a href="pentest-overview.html#information-gathering-1"><i class="fa fa-check"></i><b>2.7.2</b> Information Gathering</a></li>
<li class="chapter" data-level="2.7.3" data-path="pentest-overview.html"><a href="pentest-overview.html#pillaging-1"><i class="fa fa-check"></i><b>2.7.3</b> Pillaging</a></li>
<li class="chapter" data-level="2.7.4" data-path="pentest-overview.html"><a href="pentest-overview.html#persistence"><i class="fa fa-check"></i><b>2.7.4</b> Persistence</a></li>
<li class="chapter" data-level="2.7.5" data-path="pentest-overview.html"><a href="pentest-overview.html#vulnerability-assessment-1"><i class="fa fa-check"></i><b>2.7.5</b> Vulnerability Assessment</a></li>
<li class="chapter" data-level="2.7.6" data-path="pentest-overview.html"><a href="pentest-overview.html#privilege-escalation"><i class="fa fa-check"></i><b>2.7.6</b> Privilege Escalation</a></li>
<li class="chapter" data-level="2.7.7" data-path="pentest-overview.html"><a href="pentest-overview.html#data-exfiltration"><i class="fa fa-check"></i><b>2.7.7</b> Data Exfiltration</a></li>
</ul></li>
<li class="chapter" data-level="2.8" data-path="pentest-overview.html"><a href="pentest-overview.html#lateral-movement"><i class="fa fa-check"></i><b>2.8</b> Lateral Movement</a>
<ul>
<li class="chapter" data-level="2.8.1" data-path="pentest-overview.html"><a href="pentest-overview.html#pivoting"><i class="fa fa-check"></i><b>2.8.1</b> Pivoting</a></li>
<li class="chapter" data-level="2.8.2" data-path="pentest-overview.html"><a href="pentest-overview.html#evasive-testing-1"><i class="fa fa-check"></i><b>2.8.2</b> Evasive Testing</a></li>
<li class="chapter" data-level="2.8.3" data-path="pentest-overview.html"><a href="pentest-overview.html#information-gathering-2"><i class="fa fa-check"></i><b>2.8.3</b> Information Gathering</a></li>
<li class="chapter" data-level="2.8.4" data-path="pentest-overview.html"><a href="pentest-overview.html#vulnerability-assessment-2"><i class="fa fa-check"></i><b>2.8.4</b> Vulnerability Assessment</a></li>
<li class="chapter" data-level="2.8.5" data-path="pentest-overview.html"><a href="pentest-overview.html#privilege-exploitation"><i class="fa fa-check"></i><b>2.8.5</b> (Privilege) Exploitation</a></li>
<li class="chapter" data-level="2.8.6" data-path="pentest-overview.html"><a href="pentest-overview.html#post-exploitation"><i class="fa fa-check"></i><b>2.8.6</b> Post-Exploitation</a></li>
</ul></li>
<li class="chapter" data-level="2.9" data-path="pentest-overview.html"><a href="pentest-overview.html#proof-of-concept"><i class="fa fa-check"></i><b>2.9</b> Proof-of-Concept</a></li>
<li class="chapter" data-level="2.10" data-path="pentest-overview.html"><a href="pentest-overview.html#post-engagement"><i class="fa fa-check"></i><b>2.10</b> Post-Engagement</a>
<ul>
<li class="chapter" data-level="2.10.1" data-path="pentest-overview.html"><a href="pentest-overview.html#cleanup"><i class="fa fa-check"></i><b>2.10.1</b> Cleanup</a></li>
<li class="chapter" data-level="2.10.2" data-path="pentest-overview.html"><a href="pentest-overview.html#documentation-and-reporting"><i class="fa fa-check"></i><b>2.10.2</b> Documentation and Reporting</a></li>
<li class="chapter" data-level="2.10.3" data-path="pentest-overview.html"><a href="pentest-overview.html#report-review-meeting"><i class="fa fa-check"></i><b>2.10.3</b> Report Review Meeting</a></li>
<li class="chapter" data-level="2.10.4" data-path="pentest-overview.html"><a href="pentest-overview.html#deliverable-acceptance"><i class="fa fa-check"></i><b>2.10.4</b> Deliverable Acceptance</a></li>
<li class="chapter" data-level="2.10.5" data-path="pentest-overview.html"><a href="pentest-overview.html#post-remediation-testing"><i class="fa fa-check"></i><b>2.10.5</b> Post-Remediation Testing</a></li>
<li class="chapter" data-level="2.10.6" data-path="pentest-overview.html"><a href="pentest-overview.html#role-of-the-pentester-in-remediation"><i class="fa fa-check"></i><b>2.10.6</b> Role of the Pentester in Remediation</a></li>
<li class="chapter" data-level="2.10.7" data-path="pentest-overview.html"><a href="pentest-overview.html#data-retention"><i class="fa fa-check"></i><b>2.10.7</b> Data Retention</a></li>
<li class="chapter" data-level="2.10.8" data-path="pentest-overview.html"><a href="pentest-overview.html#close-out"><i class="fa fa-check"></i><b>2.10.8</b> Close Out</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="network-enumeration.html"><a href="network-enumeration.html"><i class="fa fa-check"></i><b>3</b> Network Enumeration</a>
<ul>
<li class="chapter" data-level="3.1" data-path="network-enumeration.html"><a href="network-enumeration.html#enumeration"><i class="fa fa-check"></i><b>3.1</b> Enumeration</a></li>
<li class="chapter" data-level="3.2" data-path="network-enumeration.html"><a href="network-enumeration.html#introduction-to-nmap"><i class="fa fa-check"></i><b>3.2</b> Introduction to Nmap</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="network-enumeration.html"><a href="network-enumeration.html#use-cases"><i class="fa fa-check"></i><b>3.2.1</b> Use Cases</a></li>
<li class="chapter" data-level="3.2.2" data-path="network-enumeration.html"><a href="network-enumeration.html#nmap-architecture"><i class="fa fa-check"></i><b>3.2.2</b> Nmap Architecture</a></li>
<li class="chapter" data-level="3.2.3" data-path="network-enumeration.html"><a href="network-enumeration.html#syntax"><i class="fa fa-check"></i><b>3.2.3</b> Syntax</a></li>
<li class="chapter" data-level="3.2.4" data-path="network-enumeration.html"><a href="network-enumeration.html#scan-techniques"><i class="fa fa-check"></i><b>3.2.4</b> Scan Techniques</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="network-enumeration.html"><a href="network-enumeration.html#host-discovery"><i class="fa fa-check"></i><b>3.3</b> Host Discovery</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="network-enumeration.html"><a href="network-enumeration.html#scan-network-range"><i class="fa fa-check"></i><b>3.3.1</b> Scan Network Range</a></li>
<li class="chapter" data-level="3.3.2" data-path="network-enumeration.html"><a href="network-enumeration.html#scan-ip-list"><i class="fa fa-check"></i><b>3.3.2</b> Scan IP List</a></li>
<li class="chapter" data-level="3.3.3" data-path="network-enumeration.html"><a href="network-enumeration.html#scan-multiple-ips"><i class="fa fa-check"></i><b>3.3.3</b> Scan Multiple IPs</a></li>
<li class="chapter" data-level="3.3.4" data-path="network-enumeration.html"><a href="network-enumeration.html#scan-single-ip"><i class="fa fa-check"></i><b>3.3.4</b> Scan Single IP</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="network-enumeration.html"><a href="network-enumeration.html#host-and-port-scanning"><i class="fa fa-check"></i><b>3.4</b> Host and Port Scanning</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="network-enumeration.html"><a href="network-enumeration.html#discovering-open-tcp-ports"><i class="fa fa-check"></i><b>3.4.1</b> Discovering Open TCP Ports</a></li>
<li class="chapter" data-level="3.4.2" data-path="network-enumeration.html"><a href="network-enumeration.html#filtered-ports"><i class="fa fa-check"></i><b>3.4.2</b> Filtered Ports</a></li>
<li class="chapter" data-level="3.4.3" data-path="network-enumeration.html"><a href="network-enumeration.html#discovering-open-udp-ports"><i class="fa fa-check"></i><b>3.4.3</b> Discovering Open UDP Ports</a></li>
<li class="chapter" data-level="3.4.4" data-path="network-enumeration.html"><a href="network-enumeration.html#version-scan"><i class="fa fa-check"></i><b>3.4.4</b> Version Scan</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="network-enumeration.html"><a href="network-enumeration.html#saving-the-results"><i class="fa fa-check"></i><b>3.5</b> Saving the Results</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="network-enumeration.html"><a href="network-enumeration.html#different-formats"><i class="fa fa-check"></i><b>3.5.1</b> Different Formats</a></li>
<li class="chapter" data-level="3.5.2" data-path="network-enumeration.html"><a href="network-enumeration.html#style-sheets"><i class="fa fa-check"></i><b>3.5.2</b> Style sheets</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="network-enumeration.html"><a href="network-enumeration.html#service-enumeration-1"><i class="fa fa-check"></i><b>3.6</b> Service Enumeration</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="network-enumeration.html"><a href="network-enumeration.html#service-version-detection"><i class="fa fa-check"></i><b>3.6.1</b> Service Version Detection</a></li>
<li class="chapter" data-level="3.6.2" data-path="network-enumeration.html"><a href="network-enumeration.html#banner-grabbing"><i class="fa fa-check"></i><b>3.6.2</b> Banner Grabbing</a></li>
<li class="chapter" data-level="3.6.3" data-path="network-enumeration.html"><a href="network-enumeration.html#tcpdump"><i class="fa fa-check"></i><b>3.6.3</b> Tcpdump</a></li>
<li class="chapter" data-level="3.6.4" data-path="network-enumeration.html"><a href="network-enumeration.html#nc"><i class="fa fa-check"></i><b>3.6.4</b> Nc</a></li>
<li class="chapter" data-level="3.6.5" data-path="network-enumeration.html"><a href="network-enumeration.html#tcpdump---intercepted-traffic"><i class="fa fa-check"></i><b>3.6.5</b> Tcpdump - Intercepted Traffic</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="network-enumeration.html"><a href="network-enumeration.html#nmap-scription-engine"><i class="fa fa-check"></i><b>3.7</b> Nmap Scription Engine</a>
<ul>
<li class="chapter" data-level="3.7.1" data-path="network-enumeration.html"><a href="network-enumeration.html#default-scripts"><i class="fa fa-check"></i><b>3.7.1</b> Default Scripts</a></li>
<li class="chapter" data-level="3.7.2" data-path="network-enumeration.html"><a href="network-enumeration.html#specific-scripts-category"><i class="fa fa-check"></i><b>3.7.2</b> Specific Scripts Category</a></li>
<li class="chapter" data-level="3.7.3" data-path="network-enumeration.html"><a href="network-enumeration.html#defined-scripts"><i class="fa fa-check"></i><b>3.7.3</b> Defined Scripts</a></li>
<li class="chapter" data-level="3.7.4" data-path="network-enumeration.html"><a href="network-enumeration.html#nmap---specifying-scripts"><i class="fa fa-check"></i><b>3.7.4</b> Nmap - Specifying Scripts</a></li>
<li class="chapter" data-level="3.7.5" data-path="network-enumeration.html"><a href="network-enumeration.html#nmap---aggressive-scan"><i class="fa fa-check"></i><b>3.7.5</b> Nmap - Aggressive Scan</a></li>
<li class="chapter" data-level="3.7.6" data-path="network-enumeration.html"><a href="network-enumeration.html#vulnerability-assessment-3"><i class="fa fa-check"></i><b>3.7.6</b> Vulnerability Assessment</a></li>
</ul></li>
<li class="chapter" data-level="3.8" data-path="network-enumeration.html"><a href="network-enumeration.html#performance"><i class="fa fa-check"></i><b>3.8</b> Performance</a>
<ul>
<li class="chapter" data-level="3.8.1" data-path="network-enumeration.html"><a href="network-enumeration.html#timeouts"><i class="fa fa-check"></i><b>3.8.1</b> Timeouts</a></li>
<li class="chapter" data-level="3.8.2" data-path="network-enumeration.html"><a href="network-enumeration.html#default-scan"><i class="fa fa-check"></i><b>3.8.2</b> Default Scan</a></li>
<li class="chapter" data-level="3.8.3" data-path="network-enumeration.html"><a href="network-enumeration.html#optimized-rtt"><i class="fa fa-check"></i><b>3.8.3</b> Optimized RTT</a></li>
<li class="chapter" data-level="3.8.4" data-path="network-enumeration.html"><a href="network-enumeration.html#max-retries"><i class="fa fa-check"></i><b>3.8.4</b> Max Retries</a></li>
<li class="chapter" data-level="3.8.5" data-path="network-enumeration.html"><a href="network-enumeration.html#default-scan-1"><i class="fa fa-check"></i><b>3.8.5</b> Default Scan</a></li>
<li class="chapter" data-level="3.8.6" data-path="network-enumeration.html"><a href="network-enumeration.html#reduced-retries"><i class="fa fa-check"></i><b>3.8.6</b> Reduced Retries</a></li>
<li class="chapter" data-level="3.8.7" data-path="network-enumeration.html"><a href="network-enumeration.html#rates"><i class="fa fa-check"></i><b>3.8.7</b> Rates</a></li>
<li class="chapter" data-level="3.8.8" data-path="network-enumeration.html"><a href="network-enumeration.html#default-scan-2"><i class="fa fa-check"></i><b>3.8.8</b> Default Scan</a></li>
<li class="chapter" data-level="3.8.9" data-path="network-enumeration.html"><a href="network-enumeration.html#optimized-scan"><i class="fa fa-check"></i><b>3.8.9</b> Optimized Scan</a></li>
<li class="chapter" data-level="3.8.10" data-path="network-enumeration.html"><a href="network-enumeration.html#default-scan---found-open-ports"><i class="fa fa-check"></i><b>3.8.10</b> Default Scan - Found Open Ports</a></li>
<li class="chapter" data-level="3.8.11" data-path="network-enumeration.html"><a href="network-enumeration.html#optimized-scan---found-open-ports"><i class="fa fa-check"></i><b>3.8.11</b> Optimized Scan - Found Open Ports</a></li>
<li class="chapter" data-level="3.8.12" data-path="network-enumeration.html"><a href="network-enumeration.html#timing"><i class="fa fa-check"></i><b>3.8.12</b> Timing</a></li>
</ul></li>
<li class="chapter" data-level="3.9" data-path="network-enumeration.html"><a href="network-enumeration.html#firewall-and-ids-ips-evasion"><i class="fa fa-check"></i><b>3.9</b> Firewall and IDS-IPS Evasion</a>
<ul>
<li class="chapter" data-level="3.9.1" data-path="network-enumeration.html"><a href="network-enumeration.html#firewalls"><i class="fa fa-check"></i><b>3.9.1</b> Firewalls</a></li>
<li class="chapter" data-level="3.9.2" data-path="network-enumeration.html"><a href="network-enumeration.html#idsips"><i class="fa fa-check"></i><b>3.9.2</b> IDS/IPS</a></li>
<li class="chapter" data-level="3.9.3" data-path="network-enumeration.html"><a href="network-enumeration.html#determine-firewalls-and-their-rules"><i class="fa fa-check"></i><b>3.9.3</b> Determine Firewalls and Their Rules</a></li>
<li class="chapter" data-level="3.9.4" data-path="network-enumeration.html"><a href="network-enumeration.html#detect-idsips"><i class="fa fa-check"></i><b>3.9.4</b> Detect IDS/IPS</a></li>
<li class="chapter" data-level="3.9.5" data-path="network-enumeration.html"><a href="network-enumeration.html#decoys"><i class="fa fa-check"></i><b>3.9.5</b> Decoys</a></li>
<li class="chapter" data-level="3.9.6" data-path="network-enumeration.html"><a href="network-enumeration.html#dns-proxying"><i class="fa fa-check"></i><b>3.9.6</b> DNS Proxying</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="enumeration-principles.html"><a href="enumeration-principles.html"><i class="fa fa-check"></i><b>4</b> Enumeration Principles</a>
<ul>
<li class="chapter" data-level="4.1" data-path="enumeration-principles.html"><a href="enumeration-principles.html#enumeration-principles-1"><i class="fa fa-check"></i><b>4.1</b> Enumeration Principles</a></li>
<li class="chapter" data-level="4.2" data-path="enumeration-principles.html"><a href="enumeration-principles.html#enumeration-metodology"><i class="fa fa-check"></i><b>4.2</b> Enumeration Metodology</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.1-internet-presence"><i class="fa fa-check"></i><b>4.2.1</b> Layer No.1: Internet Presence</a></li>
<li class="chapter" data-level="4.2.2" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.2-gateway"><i class="fa fa-check"></i><b>4.2.2</b> Layer No.2: Gateway</a></li>
<li class="chapter" data-level="4.2.3" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.3-accessible-services"><i class="fa fa-check"></i><b>4.2.3</b> Layer No.3: Accessible Services</a></li>
<li class="chapter" data-level="4.2.4" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.4-processes"><i class="fa fa-check"></i><b>4.2.4</b> Layer No.4: Processes</a></li>
<li class="chapter" data-level="4.2.5" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.5-privileges"><i class="fa fa-check"></i><b>4.2.5</b> Layer No.5: Privileges</a></li>
<li class="chapter" data-level="4.2.6" data-path="enumeration-principles.html"><a href="enumeration-principles.html#layer-no.6-os-setup"><i class="fa fa-check"></i><b>4.2.6</b> Layer No.6: OS Setup</a></li>
<li class="chapter" data-level="4.2.7" data-path="enumeration-principles.html"><a href="enumeration-principles.html#enumeration-methodology-in-practice"><i class="fa fa-check"></i><b>4.2.7</b> Enumeration Methodology in Practice</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="enumeration-principles.html"><a href="enumeration-principles.html#domain-information"><i class="fa fa-check"></i><b>4.3</b> Domain Information</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="enumeration-principles.html"><a href="enumeration-principles.html#online-presence"><i class="fa fa-check"></i><b>4.3.1</b> Online Presence</a></li>
<li class="chapter" data-level="4.3.2" data-path="enumeration-principles.html"><a href="enumeration-principles.html#certificate-transparency"><i class="fa fa-check"></i><b>4.3.2</b> Certificate Transparency</a></li>
<li class="chapter" data-level="4.3.3" data-path="enumeration-principles.html"><a href="enumeration-principles.html#company-hosted-servers"><i class="fa fa-check"></i><b>4.3.3</b> Company Hosted Servers</a></li>
<li class="chapter" data-level="4.3.4" data-path="enumeration-principles.html"><a href="enumeration-principles.html#shodan---ip-list"><i class="fa fa-check"></i><b>4.3.4</b> Shodan - IP List</a></li>
<li class="chapter" data-level="4.3.5" data-path="enumeration-principles.html"><a href="enumeration-principles.html#dns-records"><i class="fa fa-check"></i><b>4.3.5</b> DNS Records</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="enumeration-principles.html"><a href="enumeration-principles.html#cloud-resources"><i class="fa fa-check"></i><b>4.4</b> Cloud Resources</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="enumeration-principles.html"><a href="enumeration-principles.html#company-hosted-servers-1"><i class="fa fa-check"></i><b>4.4.1</b> Company Hosted Servers</a></li>
<li class="chapter" data-level="4.4.2" data-path="enumeration-principles.html"><a href="enumeration-principles.html#google-search-for-aws"><i class="fa fa-check"></i><b>4.4.2</b> Google Search for AWS</a></li>
<li class="chapter" data-level="4.4.3" data-path="enumeration-principles.html"><a href="enumeration-principles.html#google-search-for-azure"><i class="fa fa-check"></i><b>4.4.3</b> Google Search for Azure</a></li>
<li class="chapter" data-level="4.4.4" data-path="enumeration-principles.html"><a href="enumeration-principles.html#target-website---source-code"><i class="fa fa-check"></i><b>4.4.4</b> Target Website - Source Code</a></li>
<li class="chapter" data-level="4.4.5" data-path="enumeration-principles.html"><a href="enumeration-principles.html#domain.glass-results"><i class="fa fa-check"></i><b>4.4.5</b> Domain.Glass Results</a></li>
<li class="chapter" data-level="4.4.6" data-path="enumeration-principles.html"><a href="enumeration-principles.html#grayhatwarfare-results"><i class="fa fa-check"></i><b>4.4.6</b> GrayHatWarfare Results</a></li>
<li class="chapter" data-level="4.4.7" data-path="enumeration-principles.html"><a href="enumeration-principles.html#private-and-public-ssh-keys-leaked"><i class="fa fa-check"></i><b>4.4.7</b> Private and Public SSH Keys Leaked</a></li>
<li class="chapter" data-level="4.4.8" data-path="enumeration-principles.html"><a href="enumeration-principles.html#ssh-private-key"><i class="fa fa-check"></i><b>4.4.8</b> SSH Private Key</a></li>
</ul></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Knowledge is Power</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Hacking Notes</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="pentest-overview" class="section level1 hasAnchor" number="2">
<h1><span class="header-section-number">2</span> Pentest Overview<a href="pentest-overview.html#pentest-overview" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="penetration-testing-overview" class="section level2 hasAnchor" number="2.1">
<h2><span class="header-section-number">2.1</span> Penetration Testing Overview<a href="pentest-overview.html#penetration-testing-overview" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>IT is an integral part of nearly every company. The amount of critical and confidential data stored in IT systems is constantly growing, as is dependence on the uninterrupted functioning of the IT systems in use. Therefore, attacks against corporate networks, disruption of system availability, and other ways of causing significant damage to a company (such as ransomware attacks) are becoming increasingly common. Important company information obtained through security breaches and cyber-attacks may be sold to competitors, leaked on public forums, or used for other nefarious purposes. System failures are deliberately triggered because they are increasingly difficult to counteract.</p>
<p>A <code>Penetration Test</code> (<code>Pentest</code>) is an organized, targeted, and authorized attack attempt to test IT infrastructure and its defenders to determine their susceptibility to IT security vulnerabilities. A pentest uses methods and techniques that real attackers use. As penetration testers, we apply various techniques and analyses to gauge the impact that a particular vulnerability or chain of vulnerabilities may have on the confidentiality, integrity, and availability of an organization’s IT systems and data.</p>
<ul>
<li><code>A pentest aims to uncover and identify ALL vulnerabilities in the systems under investigation and improve the security for the tested systems.</code></li>
</ul>
<p>Other assessments, such as a <code>red team assessment</code>, may be scenario-based and focus on only the vulnerabilities leveraged to reach a specific end goal (i.e., accessing the CEO’s email inbox or obtaining a flag planted on a critical server).</p>
<div id="risk-management" class="section level3 hasAnchor" number="2.1.1">
<h3><span class="header-section-number">2.1.1</span> Risk Management<a href="pentest-overview.html#risk-management" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In general, it is also a part of <code>risk management</code> for a company. The main goal of IT security risk management is to identify, evaluate, and mitigate any potential risks that could damage the confidentiality, integrity, and availability of an organization’s information systems and data and reduce the overall risk to an acceptable level. This includes identifying potential threats, evaluating their risks, and taking the necessary steps to reduce or eliminate them. This is done by implementing the appropriate security controls and policies, including access control, encryption, and other security measures. By taking the time to properly manage the security risks of an organization’s IT systems, it is possible to ensure that the data is kept safe and secure.</p>
<p>However, we cannot eliminate every risk. There’s still the nature of the inherent risk of a security breach that is present even when the organization has taken all reasonable steps to manage the risk. Therefore, some risks will remain. Inherent risk is the level of risk that is present even when the appropriate security controls are in place. Companies can accept, transfer, avoid and mitigate risks in various ways. For example, they can purchase insurance to cover certain risks, such as natural disasters or accidents. By entering into a contract, they can also transfer their risks to another party, such as a third-party service provider. Additionally, they can implement preventive measures to reduce the likelihood of certain risks occurring, and if certain risks do occur, they can put in place processes to minimize their impact. Finally, they can use financial instruments, such as derivatives, to reduce the economic consequences of specific risks. All of these strategies can help companies effectively manage their risks.</p>
<p>During a pentest, we prepare detailed documentation on the steps taken and the results achieved. However, it is the client’s responsibility or the operator of their systems under investigation to rectify the vulnerabilities found. Our role is as trusted advisors to report vulnerabilities, detailed reproduction steps, and provide appropriate remediation recommendations, but we do not go in and apply patches or make code changes, etc. It is important to note that a pentest is not monitoring the IT infrastructure or systems but a momentary snapshot of the security status. A statement to this regard should be reflected in our penetration test report deliverable.</p>
</div>
<div id="vulnerability-assessments" class="section level3 hasAnchor" number="2.1.2">
<h3><span class="header-section-number">2.1.2</span> Vulnerability Assessments<a href="pentest-overview.html#vulnerability-assessments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>Vulnerability analysis</code> is a generic term that can include vulnerability or security assessments and penetration tests. In contrast to a penetration test, vulnerability or security assessments are performed using purely automated tools. Systems are checked against known issues and security vulnerabilities by running scanning tools like <a href="https://www.tenable.com/products/nessus">Nessus</a>, <a href="https://www.qualys.com/apps/vulnerability-management/">Qualys</a>, <a href="https://www.openvas.org/">OpenVAS</a>, and similar. In most cases, these automated checks cannot adapt the attacks to the configurations of the target system. This is why manual testing conducted by an experienced human tester is essential.</p>
<p>On the other hand, a pentest is a mix of automated and manual testing/validation and is performed after extensive, in most cases, manual information gathering. It is individually tailored and adjusted to the system being tested. Planning, execution, and selection of the tools used are much more complex in a pentest. Both penetration tests and other security assessments may only be carried out after mutual agreement between the contracting company and the organization that employs the penetration tester. This is because individual tests and activities performed during the pentest could be treated as criminal offenses if the tester does not have explicit written authorization to attack the customer’s systems. The organization commissioning the penetration test may only request testing against its’ own assets. If they are using any third parties to host websites or other infrastructure, they need to gain explicit written approval from these entities in most cases. Companies like Amazon no longer require prior authorization for testing certain services per this <a href="https://aws.amazon.com/security/penetration-testing/">policy</a>, if a company is using AWS to host some or all of their infrastructure. This varies from provider to provider, so it is always best to confirm asset ownership with the client during the scoping phase and check to see if any third parties they use require a written request process before any testing is performed.</p>
<p>A successful pentest requires a considerable amount of organization and preparation. There must be a straightforward process model that we can follow and, at the same time, adapt to the needs of our clients, as every environment we encounter will be different and have its own nuances. In some cases, we may work with clients who have never experienced a pentest before, and we have to be able to explain this process in detail to make sure they have a clear understanding of our planned activities, and we help them scope the assessment accurately.</p>
<p>In principle, employees are not informed about the upcoming penetration tests. However, managers may decide to inform their employees about the tests. This is because employees have a right to know when they have no expectation of privacy.</p>
<p>Because we, as penetration testers, can find personal data, such as names, addresses, salaries, and much more. The best thing we can do to uphold the <a href="https://www.gov.uk/data-protection">Data Protection Act</a> is to keep this information private. Another example would be that we get access to a database with credit card numbers, names, and CVV codes. Accordingly, we recommend that our customers improve and change the passwords as soon as possible and encrypt the data on the database.</p>
<hr />
</div>
<div id="testing-methods" class="section level3 hasAnchor" number="2.1.3">
<h3><span class="header-section-number">2.1.3</span> Testing Methods<a href="pentest-overview.html#testing-methods" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>An essential part of the process is the starting point from which we should perform our pentest. Each pentest can be performed from two different perspectives:</p>
<ul>
<li><code>External</code> or <code>Internal</code></li>
</ul>
<div id="external-penetration-test" class="section level4 hasAnchor" number="2.1.3.1">
<h4><span class="header-section-number">2.1.3.1</span> External Penetration Test<a href="pentest-overview.html#external-penetration-test" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Many pentests are performed from an external perspective or as an anonymous user on the Internet. Most customers want to ensure that they are as protected as possible against attacks on their external network perimeter. We can perform testing from our own host (hopefully using a VPN connection to avoid our ISP blocking us) or from a VPS. Some clients will not care about stealth, while others will request that we proceed as quietly as possible and approach the target systems to avoid being banned by the firewalls and IDS/IPS systems and avoid triggering an alarm. They may ask for a stealthy or “hybrid” approach where we gradually become “noisier” to test their detection capabilities. Ultimately our goal here is to access external-facing hosts, obtain sensitive data, or gain access to the internal network.</p>
</div>
<div id="internal-penetration-test" class="section level4 hasAnchor" number="2.1.3.2">
<h4><span class="header-section-number">2.1.3.2</span> Internal Penetration Test<a href="pentest-overview.html#internal-penetration-test" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>In contrast to an external pentest, an internal pentest is when we perform testing from within the corporate network. This stage may be executed after successfully penetrating the corporate network via the external pentest or starting from an assumed breach scenario. Internal pentests may also access isolated systems with no internet access whatsoever, which usually requires our physical presence at the client’s facility.</p>
<hr />
</div>
</div>
<div id="types-of-penetration-testing" class="section level3 hasAnchor" number="2.1.4">
<h3><span class="header-section-number">2.1.4</span> Types of Penetration Testing<a href="pentest-overview.html#types-of-penetration-testing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>No matter how we begin the pentest, the type of pentest plays an important role. This type determines how much information is made available to us. We can narrow down these types to the following:</p>
<table>
<colgroup>
<col width="5%" />
<col width="94%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Type</strong></th>
<th><strong>Information Provided</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Blackbox</code></td>
<td><code>Minimal</code>. Only the essential information, such as IP addresses and domains, is provided.</td>
</tr>
<tr class="even">
<td><code>Greybox</code></td>
<td><code>Extended</code>. In this case, we are provided with additional information, such as specific URLs, hostnames, subnets, and similar.</td>
</tr>
<tr class="odd">
<td><code>Whitebox</code></td>
<td><code>Maximum</code>. Here everything is disclosed to us. This gives us an internal view of the entire structure, which allows us to prepare an attack using internal information. We may be given detailed configurations, admin credentials, web application source code, etc.</td>
</tr>
<tr class="even">
<td><code>Red-Teaming</code></td>
<td>May include physical testing and social engineering, among other things. Can be combined with any of the above types.</td>
</tr>
<tr class="odd">
<td><code>Purple-Teaming</code></td>
<td>It can be combined with any of the above types. However, it focuses on working closely with the defenders.</td>
</tr>
</tbody>
</table>
<p>The less information we are provided with, the longer and more complex the approach will take. For example, for a blackbox penetration test, we must first get an overview of which servers, hosts, and services are present in the infrastructure, especially if entire networks are tested. This type of recon can take a considerable amount of time, especially if the client has requested a more stealthy approach to testing.</p>
<hr />
</div>
<div id="types-of-testing-environments" class="section level3 hasAnchor" number="2.1.5">
<h3><span class="header-section-number">2.1.5</span> Types of Testing Environments<a href="pentest-overview.html#types-of-testing-environments" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Apart from the test method and the type of test, another consideration is what is to be tested, which can be summarized in the following categories:</p>
<table>
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="27%" />
<col width="27%" />
<col width="21%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Network</td>
<td>Web App</td>
<td>Mobile</td>
<td>API</td>
<td>Thick Clients</td>
</tr>
<tr class="even">
<td>IoT</td>
<td>Cloud</td>
<td>Source Code</td>
<td>Physical Security</td>
<td>Employees</td>
</tr>
<tr class="odd">
<td>Hosts</td>
<td>Server</td>
<td>Security Policies</td>
<td>Firewalls</td>
<td>IDS/IPS</td>
</tr>
</tbody>
</table>
<p>It is important to note that these categories can often be mixed. All listed test components may be included depending on the type of test to be performed. Now we’ll shift gears and cover the Penetration Process in-depth to see how each phase is broken down and depends on the previous one.</p>
</div>
</div>
<div id="laws-and-regulations" class="section level2 hasAnchor" number="2.2">
<h2><span class="header-section-number">2.2</span> Laws and Regulations<a href="pentest-overview.html#laws-and-regulations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Each country has specific federal laws which regulate computer-related activities, copyright protection, interception of electronic communications, use and disclosure of protected health information, and collection of personal information from children, respectively.</p>
<p>It is essential to follow these laws to protect individuals from <code>unauthorized access</code> and <code>exploitation of their data</code> and to ensure their privacy. We must be aware of these laws to ensure our research activities are compliant and do not violate any of the provisions of the law. Failure to comply with these laws can result in civil or criminal penalties, making it essential for individuals to familiarize themselves with the law and understand the potential implications of their activities. Furthermore, it is crucial to ensure that research activities adhere to these laws’ requirements to protect individuals’ privacy and guard against the potential misuse of their data. By following these laws and exercising caution when conducting research activities, security researchers can help ensure that individuals’ data is kept secure and their rights are protected. Here is a summary of the related laws and regulations for a few countries and regions:</p>
<table style="width:100%;">
<colgroup>
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
<col width="16%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Categories</strong></th>
<th><strong>USA</strong></th>
<th><strong>Europe</strong></th>
<th><strong>UK</strong></th>
<th><strong>India</strong></th>
<th><strong>China</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Protecting critical information infrastructure and personal data</td>
<td><a href="https://www.cisa.gov/resources-tools/resources/cybersecurity-information-sharing-act-2015-procedures-and-guidance">Cybersecurity Information Sharing Act</a> (<code>CISA</code>)</td>
<td><a href="https://gdpr-info.eu/">General Data Protection Regulation</a> (<code>GDPR</code>)</td>
<td><a href="https://www.legislation.gov.uk/ukpga/2018/12/contents/enacted">Data Protection Act 2018</a></td>
<td><a href="https://www.indiacode.nic.in/bitstream/123456789/13116/1/it_act_2000_updated.pdf">Information Technology Act 2000</a></td>
<td><a href="https://digichina.stanford.edu/work/translation-cybersecurity-law-of-the-peoples-republic-of-china-effective-june-1-2017/">Cyber Security Law</a></td>
</tr>
<tr class="even">
<td>Criminalizing malicious computer usage and unauthorized access to computer systems</td>
<td><a href="https://www.justice.gov/jm/jm-9-48000-computer-fraud">Computer Fraud and Abuse Act</a> (<code>CFAA</code>)</td>
<td><a href="https://www.enisa.europa.eu/topics/cybersecurity-policy/nis-directive-new">Network and Information Systems Directive</a> (<code>NISD</code>)</td>
<td><a href="https://www.legislation.gov.uk/ukpga/1990/18/contents">Computer Misuse Act 1990</a></td>
<td><a href="https://www.indiacode.nic.in/bitstream/123456789/13116/1/it_act_2000_updated.pdf">Information Technology Act 2000</a></td>
<td><a href="https://www.chinalawtranslate.com/en/2015nsl/">National Security Law</a></td>
</tr>
<tr class="odd">
<td>Prohibiting circumventing technological measures to protect copyrighted works</td>
<td><a href="https://www.congress.gov/bill/105th-congress/house-bill/2281">Digital Millennium Copyright Act</a> (<code>DMCA</code>)</td>
<td><a href="https://www.europarl.europa.eu/cmsdata/179163/20090225ATT50418EN.pdf">Cybercrime Convention of the Council of Europe</a></td>
<td></td>
<td></td>
<td><a href="https://web.archive.org/web/20240201044856/http://ni.china-embassy.gov.cn/esp/sgxw/202402/t20240201_11237595.htm">Anti-Terrorism Law</a></td>
</tr>
<tr class="even">
<td>Regulating the interception of electronic communications</td>
<td><a href="https://www.congress.gov/bill/99th-congress/house-bill/4952">Electronic Communications Privacy Act</a> (<code>ECPA</code>)</td>
<td><a href="https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=CELEX%3A32002L0058">E-Privacy Directive 2002/58/EC</a></td>
<td><a href="https://www.legislation.gov.uk/ukpga/1998/42/contents">Human Rights Act 1998</a> (<code>HRA</code>)</td>
<td><a href="https://legislative.gov.in/sites/default/files/A1872-01.pdf">Indian Evidence Act of 1872</a></td>
<td></td>
</tr>
<tr class="odd">
<td>Governing the use and disclosure of protected health information</td>
<td><a href="https://aspe.hhs.gov/reports/health-insurance-portability-accountability-act-1996">Health Insurance Portability and Accountability Act</a> (<code>HIPAA</code>)</td>
<td></td>
<td><a href="https://www.legislation.gov.uk/ukpga/2006/48/contents">Police and Justice Act 2006</a></td>
<td><a href="https://legislative.gov.in/sites/default/files/A1860-45.pdf">Indian Penal Code of 1860</a></td>
<td></td>
</tr>
<tr class="even">
<td>Regulating the collection of personal information from children</td>
<td><a href="https://www.ftc.gov/legal-library/browse/rules/childrens-online-privacy-protection-rule-coppa">Children’s Online Privacy Protection Act</a> (<code>COPPA</code>)</td>
<td></td>
<td><a href="https://www.legislation.gov.uk/ukpga/2016/25/contents/enacted">Investigatory Powers Act 2016</a> (<code>IPA</code>)</td>
<td></td>
<td></td>
</tr>
<tr class="odd">
<td>A framework for cooperation between countries in investigating and prosecuting cybercrime</td>
<td></td>
<td></td>
<td><a href="https://www.legislation.gov.uk/ukpga/2000/23/contents">Regulation of Investigatory Powers Act 2000</a> (<code>RIPA</code>)</td>
<td></td>
<td></td>
</tr>
<tr class="even">
<td>Outlining individuals’ legal rights and protections regarding their personal data</td>
<td></td>
<td></td>
<td></td>
<td><a href="https://www.congress.gov/bill/116th-congress/senate-bill/2889">Personal Data Protection Bill 2019</a></td>
<td><a href="https://www.mayerbrown.com/en/perspectives-events/publications/2022/07/china-s-security-assessments-for-cross-border-data-transfers-effective-september-2022">Measures for the Security Assessment of Cross-border Transfer of Personal Information and Important Data</a></td>
</tr>
<tr class="odd">
<td>Outlining individuals’ fundamental rights and freedoms</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><a href="http://english.www.gov.cn/policies/latestreleases/202108/17/content_WS611b8062c6d0df57f98de907.html">State Council Regulation on the Protection of Critical Information Infrastructure Security</a></td>
</tr>
</tbody>
</table>
<hr />
<div id="usa" class="section level3 hasAnchor" number="2.2.1">
<h3><span class="header-section-number">2.2.1</span> USA<a href="pentest-overview.html#usa" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://www.justice.gov/jm/jm-9-48000-computer-fraud">Computer Fraud and Abuse Act</a> (<code>CFAA</code>) is a federal law that makes it a criminal offense to access a computer without authorization. It applies to computer-related activities, including hacking, identity theft, and spreading malware. The CFAA has been the focus of much criticism and controversy, with some arguing that its provisions are too far-reaching and could be used to criminalize legitimate security research. In addition, critics have raised the concern that people can interpret the CFAA’s broad definitions of computer-related activities in a manner that could lead to the prosecution of activities that were not intended to be criminal offenses. Furthermore, the CFAA has been criticized for needing more clarity regarding the meaning of specific terms, making it difficult for individuals to understand their rights and responsibilities under the law. For these reasons, it is crucial for individuals to familiarize themselves with the law and to understand the potential implications of their activities.</p>
<p>The <a href="https://www.congress.gov/bill/105th-congress/house-bill/2281">Digital Millennium Copyright Act</a> (<code>DMCA</code>) includes provisions prohibiting circumventing technological measures to protect copyrighted works. This can consist of digital locks, encryption, and authentication protocols, which safeguard software, firmware, and other types of digital content. Security researchers should know the DMCA provisions to ensure their research activities do not violate the law. It is important to remember that circumventing copyright protection measures, even for research or educational activities, can result in civil or criminal penalties. As such, researchers must exercise caution and due diligence to avoid inadvertently running afoul of the DMCA.</p>
<p>The <a href="https://www.congress.gov/bill/99th-congress/house-bill/4952">Electronic Communications Privacy Act</a> (<code>ECPA</code>) regulates the interception of electronic communications, including those sent over the Internet. This law makes it unlawful to intercept, access, monitor, or store communications without one or both parties consent. Furthermore, the ECPA prohibits using intercepted communications as evidence in a court of law. The ECPA also outlines the responsibilities of service providers, as they are not allowed to divulge the contents of communications to anyone except the sender and the receiver. Therefore, the ECPA protects the privacy of electronic communications and ensures that individuals are not subjected to illegal interception or use of their communications.</p>
<p>The <a href="https://aspe.hhs.gov/reports/health-insurance-portability-accountability-act-1996">Health Insurance Portability and Accountability Act</a> (<code>HIPAA</code>) governs the use and disclosure of protected health information and includes a set of rules for safeguarding personal health information stored electronically. Researchers should know these requirements and ensure their research activities adhere to HIPAA regulations. This includes taking measures such as encrypting data, keeping detailed data access, and sharing records. Furthermore, research must be conducted by institutional policies and procedures, and the appropriate governance body must approve any changes made. Researchers must also be mindful of the possibility of data breaches and take steps to ensure that any personal health information is kept secure. Failure to comply with HIPAA regulations can result in severe legal and financial penalties, so researchers must ensure that their research activities comply with HIPAA.</p>
<p>The <a href="https://www.ftc.gov/legal-library/browse/rules/childrens-online-privacy-protection-rule-coppa">Children’s Online Privacy Protection Act</a> (<code>COPPA</code>) is an important piece of legislation regulating the collection of personal information from children under 13. We must be aware of the provisions of COPPA and take precautions to ensure that our research activities do not violate any of the requirements of the Act. To comply with COPPA, researchers must exercise caution and take special steps to ensure that they are not collecting, using, or disclosing any personal information from children under the age of 13. Failure to comply with COPPA could result in legal action and penalties, so security researchers must familiarize themselves with the Act and comply with its provisions.</p>
<hr />
</div>
<div id="europe" class="section level3 hasAnchor" number="2.2.2">
<h3><span class="header-section-number">2.2.2</span> Europe<a href="pentest-overview.html#europe" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://gdpr-info.eu/">General Data Protection Regulation</a> (<code>GDPR</code>) regulates the handling of personal data, strengthens individuals’ rights over personal data, and imposes penalties of up to 4% of global annual revenue or 20 million euros, whichever is higher for non-compliance. Security researchers should be aware of these provisions and ensure that their research does not run afoul of GDPR. It’s important to note that GDPR applies to any company that processes the personal data of EU citizens, regardless of the company’s location.</p>
<p>The <a href="https://www.enisa.europa.eu/topics/cybersecurity-policy/nis-directive-new">Network and Information Systems Directive</a> (<code>NISD</code>) requires operators of essential services and digital service providers to take appropriate security measures and report specific incidents. It’s important to note that the NISD applies to various organizations and individuals, including those conducting penetration testing and security research.</p>
<p>The <a href="https://www.europarl.europa.eu/cmsdata/179163/20090225ATT50418EN.pdf">Cybercrime Convention of the Council of Europe</a>, the first international treaty on crimes committed via the Internet and other computer networks, provides a framework for cooperation between countries in investigating and prosecuting cybercrime.</p>
<p>The <a href="https://eur-lex.europa.eu/legal-content/EN/ALL/?uri=CELEX%3A32002L0058">E-Privacy Directive 2002/58/EC</a> regulates the processing of personal data in the electronic communication sector. This directive applies to personal processing data in connection with the provision of publicly available electronic communications services in the EU.</p>
<hr />
</div>
<div id="uk" class="section level3 hasAnchor" number="2.2.3">
<h3><span class="header-section-number">2.2.3</span> UK<a href="pentest-overview.html#uk" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://www.legislation.gov.uk/ukpga/1990/18/contents">Computer Misuse Act 1990</a> was introduced to address malicious computer usage. It is a criminal offense to access a computer system without authorization, modify data without permission, or misuse computers to commit fraud or other unlawful activities. The Act also allows for confiscating computers and other devices used to commission a computer misuse offense and encourages reporting computer misuse incidents to law enforcement authorities. It also provides for the implementation of various measures to help prevent computer misuse, including establishing a special law enforcement team and implementing appropriate security measures.</p>
<p>The <a href="https://www.legislation.gov.uk/ukpga/2018/12/contents/enacted">Data Protection Act 2018</a> is an important piece of legislation that provides individuals with certain legal rights and protections regarding their personal data. It details the rights of individuals, such as the right to access their data, the right to have their personal data rectified, and the right to object to the processing of their data. Furthermore, it outlines the obligations of those who process personal data, such as securely and transparently and providing individuals with clear and understandable information about how their data is being used. By considering the Act, security researchers can ensure that their research is conducted responsibly and lawfully.</p>
<p>The <a href="https://www.legislation.gov.uk/ukpga/1998/42/contents">Human Rights Act 1998</a> (<code>HRA</code>) is an important piece of legislation in the United Kingdom that outlines individuals’ fundamental rights and freedoms. It incorporates the European Convention on Human Rights into UK law. It ensures that individuals have the right to fair and equal treatment in various areas, such as the right to a fair trial, the right to private and family life, and the right to freedom of expression. It also gives individuals the right to access judicial remedies in cases where their rights have been violated. The Act also gives individuals the right to challenge the legality of any law or administrative action that violates their fundamental rights and freedoms. The HRA is an essential piece of legislation that helps protect individuals from abuse of power and ensures their rights are respected.</p>
<p>The <a href="https://www.legislation.gov.uk/ukpga/2006/48/contents">Police and Justice Act 2006</a> was an Act of Parliament passed in the United Kingdom, which aimed to provide a comprehensive framework for reforming the criminal justice system and policing. The Act established several new criminal offenses, including the violation of inciting religious hatred and measures to protect children from exploitation and vulnerable adults. It also provided for the creation of the Serious Organised Crime Agency and a National DNA Database. The Act also set out new measures to tackle anti-social behavior, including introducing Anti-Social Behaviour Orders. Furthermore, it included provisions to modernize the coroners’ system and provide additional powers to the police to combat terrorism. In addition, the Act sought to improve the rights of victims of crime and to provide increased protection for victims of domestic violence.</p>
<p><a href="https://www.legislation.gov.uk/ukpga/2016/25/contents/enacted">Investigatory Powers Act 2016</a> (<code>IPA</code>) regulates the use of investigatory powers by law enforcement and intelligence agencies, including hacking and other forms of digital surveillance. The IPA also requires Internet and other communications providers to retain certain data types for a specified period.</p>
<p><a href="https://www.legislation.gov.uk/ukpga/2000/23/contents">Regulation of Investigatory Powers Act 2000</a> (<code>RIPA</code>) regulates public authorities’ use of covert investigatory techniques, including hacking and other forms of digital surveillance.</p>
<hr />
</div>
<div id="india" class="section level3 hasAnchor" number="2.2.4">
<h3><span class="header-section-number">2.2.4</span> India<a href="pentest-overview.html#india" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://www.indiacode.nic.in/bitstream/123456789/13116/1/it_act_2000_updated.pdf">Information Technology Act 2000</a> provides for legal recognition of transactions using electronic data interchange and other means of electronic communication. It also criminalizes hacking and other unauthorized access to computer systems and imposes penalties for such actions.</p>
<p>The <a href="https://www.congress.gov/bill/116th-congress/senate-bill/2889">Personal Data Protection Bill 2019</a> is a proposed legislation to protect individuals’ personal data and impose penalties for non-compliance.</p>
<p>The <a href="https://legislative.gov.in/sites/default/files/A1872-01.pdf">Indian Evidence Act of 1872</a> and the Indian Penal Code of 1860 contain provisions that may be invoked in cases of cybercrime, including hacking and unauthorized access to computer systems. Security researchers should be aware of these laws and ensure our research does not run afoul.</p>
<hr />
</div>
<div id="china" class="section level3 hasAnchor" number="2.2.5">
<h3><span class="header-section-number">2.2.5</span> China<a href="pentest-overview.html#china" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <a href="https://digichina.stanford.edu/work/translation-cybersecurity-law-of-the-peoples-republic-of-china-effective-june-1-2017/">Cyber Security Law</a> establishes a legal framework for protecting critical information infrastructure and personal data and requires organizations to comply with certain security measures and report certain types of security incidents.</p>
<p>The <a href="https://www.chinalawtranslate.com/en/2015nsl/">National Security Law</a> criminalizes activities that threaten national security, including hacking and other unauthorized access to computer systems.</p>
<p>The <a href="http://ni.china-embassy.gov.cn/esp/sgxw/202402/t20240201_11237595.htm">Anti-Terrorism Law</a> criminalizes activities that support or promote terrorism, including hacking and other unauthorized access to computer systems.</p>
<p>The <a href="https://www.mayerbrown.com/en/perspectives-events/publications/2022/07/china-s-security-assessments-for-cross-border-data-transfers-effective-september-2022">Measures for the Security Assessment of Cross-border Transfer of Personal Information and Important Data</a> regulates the cross-border transfer of personal information and important data and also requires organizations to conduct security assessments and obtain approval from relevant authorities before transferring such data.</p>
<p>The <a href="http://english.www.gov.cn/policies/latestreleases/202108/17/content_WS611b8062c6d0df57f98de907.html">State Council Regulation on the Protection of Critical Information Infrastructure Security</a> regulates critical information infrastructure protection. Also, it requires organizations to take certain security measures and report certain types of security incidents.</p>
<hr />
</div>
<div id="precautionary-measures-during-penetration-tests" class="section level3 hasAnchor" number="2.2.6">
<h3><span class="header-section-number">2.2.6</span> Precautionary Measures during Penetration Tests<a href="pentest-overview.html#precautionary-measures-during-penetration-tests" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We have prepared a list of precautions we highly recommend following during each penetration test to avoid violating most laws. In addition, we should also be aware that some countries have additional regulations that apply to specific cases, and we should either inform ourselves or ask our lawyer.</p>
<table>
<colgroup>
<col width="1%" />
<col width="96%" />
<col width="1%" />
</colgroup>
<thead>
<tr class="header">
<th></th>
<th>** Precautionary Measure**</th>
<th></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>☐</code></td>
<td>Obtain written consent from the owner or authorized representative of the computer or network being tested</td>
<td></td>
</tr>
<tr class="even">
<td><code>☐</code></td>
<td>Conduct the testing within the scope of the consent obtained only and respect any limitations specified</td>
<td></td>
</tr>
<tr class="odd">
<td><code>☐</code></td>
<td>Take measures to prevent causing damage to the systems or networks being tested</td>
<td></td>
</tr>
<tr class="even">
<td><code>☐</code></td>
<td>Do not access, use or disclose personal data or any other information obtained during the testing without permission</td>
<td></td>
</tr>
<tr class="odd">
<td><code>☐</code></td>
<td>Do not intercept electronic communications without the consent of one of the parties to the communication</td>
<td></td>
</tr>
<tr class="even">
<td><code>☐</code></td>
<td>Do not conduct testing on systems or networks that are covered by the Health Insurance Portability and Accountability Act (HIPAA) without proper authorization</td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="pre-engagement" class="section level2 hasAnchor" number="2.3">
<h2><span class="header-section-number">2.3</span> Pre-Engagement<a href="pentest-overview.html#pre-engagement" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Pre-engagement is the stage of preparation for the actual penetration test. During this stage, many questions are asked, and some contractual agreements are made. The client informs us about what they want to be tested, and we explain in detail how to make the test as efficient as possible.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-PRE.png" /></p>
<p>The entire pre-engagement process consists of three essential components:</p>
<ol style="list-style-type: decimal">
<li><p>Scoping questionnaire</p></li>
<li><p>Pre-engagement meeting</p></li>
<li><p>Kick-off meeting</p></li>
</ol>
<p>Before any of these can be discussed in detail, a <code>Non-Disclosure Agreement</code> (<code>NDA</code>) must be signed by all parties. There are several types of NDAs:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Unilateral NDA</code></td>
<td>This type of NDA obligates only one party to maintain confidentiality and allows the other party to share the information received with third parties.</td>
</tr>
<tr class="even">
<td><code>Bilateral NDA</code></td>
<td>In this type, both parties are obligated to keep the resulting and acquired information confidential. This is the most common type of NDA that protects the work of penetration testers.</td>
</tr>
<tr class="odd">
<td><code>Multilateral NDA</code></td>
<td>Multilateral NDA is a commitment to confidentiality by more than two parties. If we conduct a penetration test for a cooperative network, all parties responsible and involved must sign this document.</td>
</tr>
</tbody>
</table>
<p>Exceptions can also be made in urgent cases, where we jump into the kick-off meeting, which can also occur via an online conference. It is essential to know <code>who in the company is permitted</code> to contract us for a penetration test. Because we cannot accept such an order from everyone. Imagine, for example, that a company employee hires us with the pretext of checking the corporate network’s security. However, after we finished the assessment, it turned out that this employee wanted to harm their own company and had no authorization to have the company tested. This would put us in a critical situation from a legal point of view.</p>
<p>Below is a sample (not exhaustive) list of company members who may be authorized to hire us for penetration testing. This can vary from company to company, with larger organizations not involving the C-level staff directly and the responsibility falling on IT, Audit, or IT Security senior management or the like.</p>
<table>
<colgroup>
<col width="33%" />
<col width="33%" />
<col width="33%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Chief Executive Officer (CEO)</td>
<td>Chief Technical Officer (CTO)</td>
<td>Chief Information Security Officer (CISO)</td>
</tr>
<tr class="even">
<td>Chief Security Officer (CSO)</td>
<td>Chief Risk Officer (CRO)</td>
<td>Chief Information Officer (CIO)</td>
</tr>
<tr class="odd">
<td>VP of Internal Audit</td>
<td>Audit Manager</td>
<td>VP or Director of IT/Information Security</td>
</tr>
</tbody>
</table>
<p>It is vital to determine early on in the process who has signatory authority for the contract, Rules of Engagement documents, and who will be the primary and secondary points of contact, technical support, and contact for escalating any issues.</p>
<p>This stage also requires the preparation of several documents before a penetration test can be conducted that must be signed by our client and us so that the declaration of consent can also be presented in written form if required. Otherwise the penetration test could breach the <a href="https://www.legislation.gov.uk/ukpga/1990/18/contents">Computer Misuse Act</a>. These documents include, but are not limited to:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Document</strong></th>
<th><strong>Timing for Creation</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>1. Non-Disclosure Agreement</code> (<code>NDA</code>)</td>
<td><code>After</code> Initial Contact</td>
</tr>
<tr class="even">
<td><code>2. Scoping Questionnaire</code></td>
<td><code>Before</code> the Pre-Engagement Meeting</td>
</tr>
<tr class="odd">
<td><code>3. Scoping Document</code></td>
<td><code>During</code> the Pre-Engagement Meeting</td>
</tr>
<tr class="even">
<td><code>4. Penetration Testing Proposal</code> (<code>Contract/Scope of Work</code> (<code>SoW</code>))</td>
<td><code>During</code> the Pre-engagement Meeting</td>
</tr>
<tr class="odd">
<td><code>5. Rules of Engagement</code> (<code>RoE</code>)</td>
<td><code>Before</code> the Kick-Off Meeting</td>
</tr>
<tr class="even">
<td><code>6. Contractors Agreement</code> (Physical Assessments)</td>
<td><code>Before</code> the Kick-Off Meeting</td>
</tr>
<tr class="odd">
<td><code>7. Reports</code></td>
<td><code>During</code> and <code>after</code> the conducted Penetration Test</td>
</tr>
</tbody>
</table>
<p>Note: Our client may provide a separate scoping document listing in-scope IP addresses/ranges/URLs and any necessary credentials but this information should also be documented as an appendix in the RoE document.</p>
<p><strong>Important Note:</strong></p>
<p>These documents should be reviewed and adapted by a lawyer after they have been prepared.</p>
<hr />
<div id="scoping-questionnaire" class="section level3 hasAnchor" number="2.3.1">
<h3><span class="header-section-number">2.3.1</span> Scoping Questionnaire<a href="pentest-overview.html#scoping-questionnaire" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After initial contact is made with the client, we typically send them a <code>Scoping Questionnaire</code> to better understand the services they are seeking. This scoping questionnaire should clearly explain our services and may typically ask them to choose one or more from the following list:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>☐ Internal Vulnerability Assessment</td>
<td>☐ External Vulnerability Assessment</td>
</tr>
<tr class="even">
<td>☐ Internal Penetration Test</td>
<td>☐ External Penetration Test</td>
</tr>
<tr class="odd">
<td>☐ Wireless Security Assessment</td>
<td>☐ Application Security Assessment</td>
</tr>
<tr class="even">
<td>☐ Physical Security Assessment</td>
<td>☐ Social Engineering Assessment</td>
</tr>
<tr class="odd">
<td>☐ Red Team Assessment</td>
<td>☐ Web Application Security Assessment</td>
</tr>
</tbody>
</table>
<p>Under each of these, the questionnaire should allow the client to be more specific about the required assessment. Do they need a web application or mobile application assessment? Secure code review? Should the Internal Penetration Test be black box and semi-evasive? Do they want just a phishing assessment as part of the Social Engineering Assessment or also vishing calls? This is our chance to explain the depth and breadth of our services, ensure that we understand our client’s needs and expectations, and ensure that we can adequately deliver the assessment they require.</p>
<p>Aside from the assessment type, client name, address, and key personnel contact information, some other critical pieces of information include:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>How many expected live hosts?</td>
<td></td>
</tr>
<tr class="even">
<td>How many IPs/CIDR ranges in scope?</td>
<td></td>
</tr>
<tr class="odd">
<td>How many Domains/Subdomains are in scope?</td>
<td></td>
</tr>
<tr class="even">
<td>How many wireless SSIDs in scope?</td>
<td></td>
</tr>
<tr class="odd">
<td>How many web/mobile applications? If testing is authenticated, how many roles (standard user, admin, etc.)?</td>
<td></td>
</tr>
<tr class="even">
<td>For a phishing assessment, how many users will be targeted? Will the client provide a list, or we will be required to gather this list via OSINT?</td>
<td></td>
</tr>
<tr class="odd">
<td>If the client is requesting a Physical Assessment, how many locations? If multiple sites are in-scope, are they geographically dispersed?</td>
<td></td>
</tr>
<tr class="even">
<td>What is the objective of the Red Team Assessment? Are any activities (such as phishing or physical security attacks) out of scope?</td>
<td></td>
</tr>
<tr class="odd">
<td>Is a separate Active Directory Security Assessment desired?</td>
<td></td>
</tr>
<tr class="even">
<td>Will network testing be conducted from an anonymous user on the network or a standard domain user?</td>
<td></td>
</tr>
<tr class="odd">
<td>Do we need to bypass Network Access Control (NAC)?</td>
<td></td>
</tr>
</tbody>
</table>
<p>Finally, we will want to ask about information disclosure and evasiveness (if applicable to the assessment type):</p>
<ul>
<li><p>Is the Penetration Test black box (no information provided), grey box (only IP address/CIDR ranges/URLs provided), white box (detailed information provided)</p></li>
<li><p>Would they like us to test from a non-evasive, hybrid-evasive (start quiet and gradually become “louder” to assess at what level the client’s security personnel detect our activities), or fully evasive.</p></li>
</ul>
<p>This information will help us ensure we assign the right resources and deliver the engagement based on the client’s expectations. This information is also necessary for providing an accurate proposal with a project timeline (for example, a Vulnerability Assessment will take considerably less time than a Red Team Assessment) and cost (an External Penetration Test against 10 IPs will cost significantly less than an Internal Penetration Test with 30 /24 networks in-scope).</p>
<p>Based on the information we received from the scoping questionnaire, we create an overview and summarize all information in the <code>Scoping Document</code>.</p>
<hr />
</div>
<div id="pre-engagement-meeting" class="section level3 hasAnchor" number="2.3.2">
<h3><span class="header-section-number">2.3.2</span> Pre-Engagement Meeting<a href="pentest-overview.html#pre-engagement-meeting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have an initial idea of the client’s project requirements, we can move on to the <code>pre-engagement meeting</code>. This meeting discusses all relevant and essential components with the customer before the penetration test, explaining them to our customer. The information we gather during this phase, along with the data collected from the scoping questionnaire, will serve as inputs to the <code>Penetration Testing Proposal</code>, also known as the <code>Contract</code> or <code>Scope of Work</code> (<code>SoW</code>). We can think of the whole process as a visit to the doctor to inform ourselves regarding the planned examinations. This phase typically occurs via e-mail and during an online conference call or in-person meeting.</p>
<p>Note: We may encounter clients during our career that are undergoing their first ever penetration test, or the direct client PoC is not familiar with the process. It is not uncommon to use part of the pre-engagement meeting to review the scoping questionnaire either in part or step-by-step.</p>
<div id="contract---checklist" class="section level4 hasAnchor" number="2.3.2.1">
<h4><span class="header-section-number">2.3.2.1</span> Contract - Checklist<a href="pentest-overview.html#contract---checklist" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Checkpoint</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>☐ NDA</code></td>
<td>Non-Disclosure Agreement (NDA) refers to a secrecy contract between the client and the contractor regarding all written or verbal information concerning an order/project. The contractor agrees to treat all confidential information brought to its attention as strictly confidential, even after the order/project is completed. Furthermore, any exceptions to confidentiality, the transferability of rights and obligations, and contractual penalties shall be stipulated in the agreement. The NDA should be signed before the kick-off meeting or at the latest during the meeting before any information is discussed in detail.</td>
</tr>
<tr class="even">
<td><code>☐ Goals</code></td>
<td>Goals are milestones that must be achieved during the order/project. In this process, goal setting is started with the significant goals and continued with fine-grained and small ones.</td>
</tr>
<tr class="odd">
<td><code>☐ Scope</code></td>
<td>The individual components to be tested are discussed and defined. These may include domains, IP ranges, individual hosts, specific accounts, security systems, etc. Our customers may expect us to find out one or the other point by ourselves. However, the legal basis for testing the individual components has the highest priority here.</td>
</tr>
<tr class="even">
<td><code>☐ Penetration Testing Type</code></td>
<td>When choosing the type of penetration test, we present the individual options and explain the advantages and disadvantages. Since we already know the goals and scope of our customers, we can and should also make a recommendation on what we advise and justify our recommendation accordingly. Which type is used in the end is the client’s decision.</td>
</tr>
<tr class="odd">
<td><code>☐ Methodologies</code></td>
<td>Examples: OSSTMM, OWASP, automated and manual unauthenticated analysis of the internal and external network components, vulnerability assessments of network components and web applications, vulnerability threat vectorization, verification and exploitation, and exploit development to facilitate evasion techniques.</td>
</tr>
<tr class="even">
<td><code>☐ Penetration Testing Locations</code></td>
<td>External: Remote (via secure VPN) and/or Internal: Internal or Remote (via secure VPN)</td>
</tr>
<tr class="odd">
<td><code>☐ Time Estimation</code></td>
<td>For the time estimation, we need the start and the end date for the penetration test. This gives us a precise time window to perform the test and helps us plan our procedure. It is also vital to explicitly ask how time windows the individual attacks (Exploitation / Post-Exploitation / Lateral Movement) are to be carried out. These can be carried out during or outside regular working hours. When testing outside regular working hours, the focus is more on the security solutions and systems that should withstand our attacks.</td>
</tr>
<tr class="even">
<td><code>☐ Third Parties</code></td>
<td>For the third parties, it must be determined via which third-party providers our customer obtains services. These can be cloud providers, ISPs, and other hosting providers. Our client must obtain written consent from these providers describing that they agree and are aware that certain parts of their service will be subject to a simulated hacking attack. It is also highly advisable to require the contractor to forward the third-party permission sent to us so that we have actual confirmation that this permission has indeed been obtained.</td>
</tr>
<tr class="odd">
<td><code>☐ Evasive Testing</code></td>
<td>Evasive testing is the test of evading and passing security traffic and security systems in the customer’s infrastructure. We look for techniques that allow us to find out information about the internal components and attack them. It depends on whether our contractor wants us to use such techniques or not.</td>
</tr>
<tr class="even">
<td><code>☐ Risks</code></td>
<td>We must also inform our client about the risks involved in the tests and the possible consequences. Based on the risks and their potential severity, we can then set the limitations together and take certain precautions.</td>
</tr>
<tr class="odd">
<td><code>☐ Scope Limitations &amp; Restrictions</code></td>
<td>It is also essential to determine which servers, workstations, or other network components are essential for the client’s proper functioning and its customers. We will have to avoid these and must not influence them any further, as this could lead to critical technical errors that could also affect our client’s customers in production.</td>
</tr>
<tr class="even">
<td><code>☐ Information Handling</code></td>
<td>HIPAA, PCI, HITRUST, FISMA/NIST, etc.</td>
</tr>
<tr class="odd">
<td><code>☐ Contact Information</code></td>
<td>For the contact information, we need to create a list of each person’s name, title, job title, e-mail address, phone number, office phone number, and an escalation priority order.</td>
</tr>
<tr class="even">
<td><code>☐ Lines of Communication</code></td>
<td>It should also be documented which communication channels are used to exchange information between the customer and us. This may involve e-mail correspondence, telephone calls, or personal meetings.</td>
</tr>
<tr class="odd">
<td><code>☐ Reporting</code></td>
<td>Apart from the report’s structure, any customer-specific requirements the report should contain are also discussed. In addition, we clarify how the reporting is to take place and whether a presentation of the results is desired.</td>
</tr>
<tr class="even">
<td><code>☐ Payment Terms</code></td>
<td>Finally, prices and the terms of payment are explained.</td>
</tr>
</tbody>
</table>
<p>The most crucial element of this meeting is the detailed presentation of the penetration test to our client and its focus. As we already know, each piece of infrastructure is unique for the most part, and each client has particular preferences on which they place the most importance. Finding out these priorities is an essential part of this meeting.</p>
<p>We can think of it as ordering in a restaurant. If we want a medium-rare steak and the chef gives us a well-done steak because he believes it is better, it will not be what we were hoping for. Therefore, we should prioritize our client’s wishes and serve the steak as they ordered.</p>
<p>Based on the <code>Contract Checklist</code> and the input information shared in scoping, the <code>Penetration Testing Proposal</code> (<code>Contract</code>) and the associated <code>Rules of Engagement</code> (<code>RoE</code>) are created.</p>
</div>
<div id="rules-of-engagement---checklist" class="section level4 hasAnchor" number="2.3.2.2">
<h4><span class="header-section-number">2.3.2.2</span> Rules of Engagement - Checklist<a href="pentest-overview.html#rules-of-engagement---checklist" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Checkpoint</strong></th>
<th><strong>Contents</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>☐ Introduction</code></td>
<td>Description of this document.</td>
</tr>
<tr class="even">
<td><code>☐ Contractor</code></td>
<td>Company name, contractor full name, job title.</td>
</tr>
<tr class="odd">
<td><code>☐ Penetration Testers</code></td>
<td>Company name, pentesters full name.</td>
</tr>
<tr class="even">
<td><code>☐ Contact Information</code></td>
<td>Mailing addresses, e-mail addresses, and phone numbers of all client parties and penetration testers.</td>
</tr>
<tr class="odd">
<td><code>☐ Purpose</code></td>
<td>Description of the purpose for the conducted penetration test.</td>
</tr>
<tr class="even">
<td><code>☐ Goals</code></td>
<td>Description of the goals that should be achieved with the penetration test.</td>
</tr>
<tr class="odd">
<td><code>☐ Scope</code></td>
<td>All IPs, domain names, URLs, or CIDR ranges.</td>
</tr>
<tr class="even">
<td><code>☐ Lines of Communication</code></td>
<td>Online conferences or phone calls or face-to-face meetings, or via e-mail.</td>
</tr>
<tr class="odd">
<td><code>☐ Time Estimation</code></td>
<td>Start and end dates.</td>
</tr>
<tr class="even">
<td><code>☐ Time of the Day to Test</code></td>
<td>Times of the day to test.</td>
</tr>
<tr class="odd">
<td><code>☐ Penetration Testing Type</code></td>
<td>External/Internal Penetration Test/Vulnerability Assessments/Social Engineering.</td>
</tr>
<tr class="even">
<td><code>☐ Penetration Testing Locations</code></td>
<td>Description of how the connection to the client network is established.</td>
</tr>
<tr class="odd">
<td><code>☐ Methodologies</code></td>
<td>OSSTMM, PTES, OWASP, and others.</td>
</tr>
<tr class="even">
<td><code>☐ Objectives / Flags</code></td>
<td>Users, specific files, specific information, and others.</td>
</tr>
<tr class="odd">
<td><code>☐ Evidence Handling</code></td>
<td>Encryption, secure protocols</td>
</tr>
<tr class="even">
<td><code>☐ System Backups</code></td>
<td>Configuration files, databases, and others.</td>
</tr>
<tr class="odd">
<td><code>☐ Information Handling</code></td>
<td>Strong data encryption</td>
</tr>
<tr class="even">
<td><code>☐ Incident Handling and Reporting</code></td>
<td>Cases for contact, pentest interruptions, type of reports</td>
</tr>
<tr class="odd">
<td><code>☐ Status Meetings</code></td>
<td>Frequency of meetings, dates, times, included parties</td>
</tr>
<tr class="even">
<td><code>☐ Reporting</code></td>
<td>Type, target readers, focus</td>
</tr>
<tr class="odd">
<td><code>☐ Retesting</code></td>
<td>Start and end dates</td>
</tr>
<tr class="even">
<td><code>☐ Disclaimers and Limitation of Liability</code></td>
<td>System damage, data loss</td>
</tr>
<tr class="odd">
<td><code>☐ Permission to Test</code></td>
<td>Signed contract, contractors agreement</td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="kick-off-meeting" class="section level3 hasAnchor" number="2.3.3">
<h3><span class="header-section-number">2.3.3</span> Kick-Off Meeting<a href="pentest-overview.html#kick-off-meeting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>kick-off meeting</code> usually occurs at a scheduled time and in-person after signing all contractual documents. This meeting usually includes client POC(s) (from Internal Audit, Information Security, IT, Governance &amp; Risk, etc., depending on the client), client technical support staff (developers, sysadmins, network engineers, etc.), and the penetration testing team (someone in a management role (such as the Practice Lead), the actual penetration tester(s), and sometimes a Project Manager or even the Sales Account Executive or similar). We will go over the nature of the penetration test and how it will take place. Usually, there is no Denial of Service (DoS) testing. We also explain that if a critical vulnerability is identified, penetration testing activities will be paused, a vulnerability notification report will be generated, and the emergency contacts will be contacted. Typically these are only generated during External Penetration Tests for critical flaws such as unauthenticated remote code execution (RCE), SQL injection, or another flaw that leads to sensitive data disclosure. The purpose of this notification is to allow the client to assess the risk internally and determine if the issue warrants an emergency fix. We would typically only stop an Internal Penetration Test and alert the client if a system becomes unresponsive, we find evidence of illegal activity (such as illegal content on a file share) or the presence of an external threat actor in the network or a prior breach.</p>
<p>We must also inform our customers about potential risks during a penetration test. For example, we should mention that a penetration test can leave many <code>log entries and alarms</code> in their security applications. In addition, if brute forcing or any similar attack is used, it is also worth mentioning that we may accidentally <code>lock some users</code> found during the penetration test. We also must inform our customers that they must contact us immediately if the penetration test performed <code>negatively impacts their network</code>.</p>
<p>Explaining the penetration testing process gives everyone involved a clear idea of our entire process. This demonstrates our professional approach and convinces our questioners that we know what we are doing. Because apart from the technical staff, CTO, and CISO, it will sound like a certain kind of magic that is very difficult for non-technical professionals to understand. So we must be mindful of our audience and target the most technically inexperienced questioner so our approach can be followed by everyone we talk to.</p>
<p>All points related to testing need to be discussed and clarified. It is crucial to respond precisely to the wishes and expectations of the customer/client. Every company structure and network is different and requires an adapted approach. Each client has different goals, and we should adjust our testing to their wishes. We can typically see how experienced our clients are in undergoing penetration tests early in the call, so we may have to shift our focus to explain things in more detail and be prepared to field more questions, or the kickoff call may be very quick and straightforward.</p>
<hr />
</div>
<div id="contractors-agreement" class="section level3 hasAnchor" number="2.3.4">
<h3><span class="header-section-number">2.3.4</span> Contractors Agreement<a href="pentest-overview.html#contractors-agreement" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If the penetration test also includes physical testing, then an additional contractor’s agreement is required. Since it is not only a virtual environment but also a physical intrusion, completely different laws apply here. It is also possible that many of the employees have not been informed about the test. Suppose we encounter employees with a very high-security awareness during the physical attack and social engineering attempts, and we get caught. In that case, the employees will, in most cases, contact the police. This additional <code>contractor's agreement</code> is our “<code>get out of jail free card</code>” in this case.</p>
<div id="contractors-agreement---checklist-for-physical-assessments" class="section level4 hasAnchor" number="2.3.4.1">
<h4><span class="header-section-number">2.3.4.1</span> Contractors Agreement - Checklist for Physical Assessments<a href="pentest-overview.html#contractors-agreement---checklist-for-physical-assessments" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th><strong>Checkpoint</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>☐ Introduction</code></td>
</tr>
<tr class="even">
<td><code>☐ Contractor</code></td>
</tr>
<tr class="odd">
<td><code>☐ Purpose</code></td>
</tr>
<tr class="even">
<td><code>☐ Goal</code></td>
</tr>
<tr class="odd">
<td><code>☐ Penetration Testers</code></td>
</tr>
<tr class="even">
<td><code>☐ Contact Information</code></td>
</tr>
<tr class="odd">
<td><code>☐ Physical Addresses</code></td>
</tr>
<tr class="even">
<td><code>☐ Building Name</code></td>
</tr>
<tr class="odd">
<td><code>☐ Floors</code></td>
</tr>
<tr class="even">
<td><code>☐ Physical Room Identifications</code></td>
</tr>
<tr class="odd">
<td><code>☐ Physical Components</code></td>
</tr>
<tr class="even">
<td><code>☐ Timeline</code></td>
</tr>
<tr class="odd">
<td><code>☐ Notarization</code></td>
</tr>
<tr class="even">
<td><code>☐ Permission to Test</code></td>
</tr>
</tbody>
</table>
<hr />
</div>
</div>
<div id="setting-up" class="section level3 hasAnchor" number="2.3.5">
<h3><span class="header-section-number">2.3.5</span> Setting Up<a href="pentest-overview.html#setting-up" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After all the above points have been worked through, and we have the necessary information, we plan our approach and prepare everything. We will find that the penetration test results are still unknown, but we can prepare our VMs, VPS, and other tools/systems for all scenarios and situations. More information and how to prepare these systems can be found in the <a href="https://academy.hackthebox.com/module/details/87">Setting Up</a> module.</p>
</div>
</div>
<div id="information-gathering" class="section level2 hasAnchor" number="2.4">
<h2><span class="header-section-number">2.4</span> Information Gathering<a href="pentest-overview.html#information-gathering" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Once the pre-engagement phase has been completed, and all parties have signed all contractual terms and conditions, the <code>information gathering</code> phase begins. Information gathering is an essential part of any security assessment. This is the phase in which we gather all available information about the company, its employees and infrastructure, and how they are organized. Information gathering is the most frequent and vital phase throughout the penetration testing process, to which we will return again and again.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-IG.png" /></p>
<p>All the steps we take to exploit the vulnerabilities are based on the information we enumerate about our targets. This phase can be considered the cornerstone of any penetration test. We can obtain the necessary information relevant to us in many different ways. However, we can divide them into the following categories:</p>
<ul>
<li>Open-Source Intelligence</li>
<li>Infrastructure Enumeration</li>
<li>Service Enumeration</li>
<li>Host Enumeration</li>
</ul>
<p>All four categories should and must be performed by us for each penetration test. This is because the <code>information</code> is the main component that leads us to successful penetration testing and identifying security vulnerabilities. We can get this information anywhere, whether on social media, job postings, individual hosts and servers, or even the employees. Information is continually being spread and shared everywhere.</p>
<p>After all, we humans communicate by exchanging information, but network components and services communicate similarly. Any exchange of information always has a specific purpose. For computer networks, the aim is always to trigger a particular process. Be it storing data in a database, registering, generating specific values, or forwarding the information.</p>
<hr />
<div id="open-source-intelligence" class="section level3 hasAnchor" number="2.4.1">
<h3><span class="header-section-number">2.4.1</span> Open-Source Intelligence<a href="pentest-overview.html#open-source-intelligence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s assume that our client wants us to see what information we can find about his company on the internet. For this purpose, we use what is known as <code>Open Source Intelligence</code> (<code>OSINT</code>). OSINT is a process for finding publicly available information on a target company or individuals that allows the identification of events (i.e., public and private meetings), external and internal dependencies, and connections. OSINT uses public (Open-Source) information from freely available sources to obtain the desired results. We can often find security-relevant and sensitive information from companies and their employees. Usually, the people who share such information are unaware that they are not the only ones who can access it.</p>
<p>It is possible to find highly sensitive information such as passwords, hashes, keys, tokens, and much more that can give us access to the network within just a few minutes. Repositories on sites like <a href="https://github.com/">Github</a> or other development platforms are often not set up correctly, and external viewers can see this information. If this type of sensitive information is found at the onset of testing, the Incident Handling and Report section of the RoE should describe the procedure for reporting these types of critical security vulnerabilities. Publicly published passwords or SSH keys represent a critical security gap if they have not already been removed or changed. Therefore, our client’s administrator must review this information before we proceed.</p>
<div id="private-and-public-ssh-keys" class="section level4 hasAnchor" number="2.4.1.1">
<h4><span class="header-section-number">2.4.1.1</span> Private and Public SSH Keys<a href="pentest-overview.html#private-and-public-ssh-keys" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="https://academy.hackthebox.com/storage/modules/90/searchcode3.png" /></p>
<p>Developers often share whole sections of code on <a href="https://stackoverflow.com/">StackOverflow</a> to show other developers a better overview of how their code works to help them solve their problems. This type of information can also be found very quickly and used against the company. Our task is to find such security holes and have them closed. We can learn much more from the <a href="https://academy.hackthebox.com/course/preview/osint-corporate-recon">OSINT: Corporate Recon</a> module. It shows many different techniques for how we can find such information.</p>
<hr />
</div>
</div>
<div id="infrastructure-enumeration" class="section level3 hasAnchor" number="2.4.2">
<h3><span class="header-section-number">2.4.2</span> Infrastructure Enumeration<a href="pentest-overview.html#infrastructure-enumeration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>During the infrastructure enumeration, we try to overview the company’s position on the internet and intranet. For this, we use OSINT and the first active scans. We use services such as DNS to create a map of the client’s servers and hosts and develop an understanding of how their <code>infrastructure</code> is structured. This includes name servers, mail servers, web servers, cloud instances, and more. We make an accurate list of hosts and their IP addresses and compare them to our scope to see if they are included and listed.</p>
<p>In this phase, we also try to determine the company’s security measures. The more precise this information is, the easier it will be to disguise our attacks (<code>Evasive Testing</code>). But identifying firewalls, such as web application firewalls, also gives us an excellent understanding of what techniques could trigger an alarm for our customer and what methods can be used to avoid that alarm.</p>
<p>Here, it also does not matter “where” we are positioned, whether we are trying to gain an overview of the infrastructure from the outside (<code>external</code>) or examining the infrastructure from the inside (<code>internal</code>) of the network. Enumeration from inside the network gives us a good overview of the hosts and servers that we can use as targets for a <code>Password Spraying</code> attack, in which we use one password to attempt to authenticate with as many different user names as possible, hoping for one successful authentication attempt to grant us a foothold in the network. All these methods and techniques used for this purpose will be looked at in more detail in the individual modules.</p>
<hr />
</div>
<div id="service-enumeration" class="section level3 hasAnchor" number="2.4.3">
<h3><span class="header-section-number">2.4.3</span> Service Enumeration<a href="pentest-overview.html#service-enumeration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In service enumeration, we identify services that allow us to interact with the host or server over the network (or locally, from an internal perspective). Therefore, it is crucial to find out about the service, what <code>version</code> it is, what <code>information</code> it provides us, and the <code>reason</code> it can be used. Once we understand the background of what this service has been provisioned for, some logical conclusions can be drawn to provide us with several options.</p>
<p>Many services have a version history that allows us to identify whether the installed version on the host or server is actually up to date or not. This will also help us find security vulnerabilities that remain with older versions in most cases. Many administrators are afraid to change applications that work, as it could harm the entire infrastructure. Therefore, administrators often prefer to accept the risk of leaving one or more vulnerabilities open and maintaining the functionality instead of closing the security gaps.</p>
<hr />
</div>
<div id="host-enumeration" class="section level3 hasAnchor" number="2.4.4">
<h3><span class="header-section-number">2.4.4</span> Host Enumeration<a href="pentest-overview.html#host-enumeration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have a detailed list of the customer’s infrastructure, we examine every single host listed in the scoping document. We try to identify which <code>operating system</code> is running on the host or server, which <code>services</code> it uses, which <code>versions</code> of the services, and much more. Again, apart from the active scans, we can also use various OSINT methods to tell us how this host or server may be configured.</p>
<p>We can find many different services, such as an FTP server that the company uses to exchange data between employees and even allows anonymous access. Even today, there are many hosts and servers that the manufacturers no longer support. However, vulnerabilities are still found for these older versions of operating systems and services, which then remain and endanger our client’s entire infrastructure.</p>
<p>It does not matter here whether we examine each host or server externally or internally. However, from the internal perspective, we will find services that are often not accessible from the outside. Therefore, many administrators become careless and often consider these services “secure” because they are not directly accessible from the internet. Thus, many misconfigurations are often discovered here due to these assumptions or lax practices. During host enumeration, we try to determine what role this host or server plays and what network components it communicates with. In addition, we must also identify which <code>services</code> it uses for this purpose and on which <code>ports</code> they are located.</p>
<p>During internal host enumeration, which in most cases comes after the successful <code>Exploitation</code> of one or more vulnerabilities, we also examine the host or server from the inside. This means we look for sensitive <code>files</code>, local <code>services</code>, <code>scripts</code>, <code>applications</code>, <code>information</code>, and other things that could be stored on the host. This is also an essential part of the <code>Post-Exploitation</code> phase, where we try to exploit and elevate privileges.</p>
<hr />
</div>
<div id="pillaging" class="section level3 hasAnchor" number="2.4.5">
<h3><span class="header-section-number">2.4.5</span> Pillaging<a href="pentest-overview.html#pillaging" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Another essential step is <code>Pillaging</code>. After hitting the <code>Post-Exploitation</code> stage, pillaging is performed to collect sensitive information locally on the already exploited host, such as employee names, customer data, and much more. However, this information gathering only occurs after exploiting the target host and gaining access to it.</p>
<p>The information we can obtain on the exploited hosts can be divided into many different categories and varies greatly. This depends on the purpose of the host and its positioning in the corporate network. The administrators taking the security measures for these hosts also play a significant role. Nevertheless, such information can show the <code>impact</code> of a potential attack on our client and be used for further steps to <code>escalate our privileges</code> or <code>move laterally</code> further in the network.</p>
<ul>
<li>Note that <code>HTB Academy</code> does not have a module explicitly focused on pillaging.</li>
</ul>
<p>This is intentional for reasons we will clarify here. Pillaging alone is not a stage or a subcategory as many often describe but an integral part of the information gathering and privilege escalation stages that is inevitably performed locally on target systems.</p>
<ul>
<li><code>Pillaging is explained in other modules separately, where we consider the corresponding steps valuable and necessary.</code></li>
</ul>
<p>Here is a small list of modules where <code>Pillaging</code> is covered, but this topic will be covered in many other modules as well:</p>
<table>
<colgroup>
<col width="39%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<tbody>
<tr class="odd">
<td><code>Network Enumeration with Nmap</code></td>
<td><code>Getting Started</code></td>
<td><code>Password Attacks</code></td>
</tr>
<tr class="even">
<td><code>Active Directory Enumeration &amp; Attacks</code></td>
<td><code>Linux Privilege Escalation</code></td>
<td><code>Windows Privilege Escalation</code></td>
</tr>
<tr class="odd">
<td><code>Attacking Common Services</code></td>
<td><code>Attacking Common Applications</code></td>
<td><code>Attacking Enterprise Networks</code></td>
</tr>
</tbody>
</table>
<p>We will interact with more than <code>150 targets</code> during the Penetration Tester Job Role Path and perform nine simulated mini penetration tests, giving us plenty of opportunities to work on and practice this topic. Furthermore, operating system-specific modules should be considered from the pillaging point of view because much of what is shown in those modules can be used for information retrieval or privilege escalation on the target systems.</p>
</div>
</div>
<div id="vulnerability-assessment" class="section level2 hasAnchor" number="2.5">
<h2><span class="header-section-number">2.5</span> Vulnerability Assessment<a href="pentest-overview.html#vulnerability-assessment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>During the <code>vulnerability assessment</code> phase, we examine and analyze the information gathered during the information gathering phase. The vulnerability assessment phase is an analytical process based on the findings.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-VA.png" /></p>
<p><code>An analysis is a detailed examination of an event or process, describing its origin and impact, that with the help of certain precautions and actions, can be triggered to support or prevent future occurrences.</code></p>
<p>Any analysis can be very complicated, as many different factors and their interdependencies play a significant role. Apart from the fact that we work with the three different times (past, present, and future) during each analysis, the origin and destination play a significant role. There are four different types of analysis:</p>
<table>
<colgroup>
<col width="4%" />
<col width="95%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Analysis Type</strong></th>
<th><strong>Description</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>Descriptive</code></td>
<td>Descriptive analysis is essential in any data analysis. On the one hand, it describes a data set based on individual characteristics. It helps to detect possible errors in data collection or outliers in the data set.</td>
</tr>
<tr class="even">
<td><code>Diagnostic</code></td>
<td>Diagnostic analysis clarifies conditions’ causes, effects, and interactions. Doing so provides insights that are obtained through correlations and interpretation. We must take a backward-looking view, similar to descriptive analysis, with the subtle difference that we try to find reasons for events and developments.</td>
</tr>
<tr class="odd">
<td><code>Predictive</code></td>
<td>By evaluating historical and current data, predictive analysis creates a predictive model for future probabilities. Based on the results of descriptive and diagnostic analyses, this method of data analysis makes it possible to identify trends, detect deviations from expected values at an early stage, and predict future occurrences as accurately as possible.</td>
</tr>
<tr class="even">
<td><code>Prescriptive</code></td>
<td>Prescriptive analytics aims to narrow down what actions to take to eliminate or prevent a future problem or trigger a specific activity or process.</td>
</tr>
</tbody>
</table>
<p>We use our results and information obtained so far and analyze them to make conclusions. The formation of conclusions can be extended very far, but we must then confirm or disprove them. Suppose we found an open TCP port 2121 on a host during the information-gathering phase.</p>
<p>Other than the fact that this port is open, Nmap did not show us anything else. We must now ask ourselves what conclusions can be drawn from this result. Therefore, it does not matter which question we start with to make our conclusions. However, it is essential to ask <code>precise questions</code> and remember what we <code>know</code> and <code>do not know</code>. At this point, we must first ask ourselves what we <code>see</code> and what we actually <code>have</code>, because what we see is not the same as what we have:</p>
<ul>
<li><p>a <code>TCP</code> port <code>2121</code>. - <code>TCP</code> already means that this service is <code>connection-oriented</code>.</p></li>
<li><p>Is this a <code>standard</code> port? - <code>No</code>, because these are between <code>0-1023</code>, aka well-known or <a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">system ports</a></p></li>
<li><p>Are there any numbers in this <code>port number</code> that look <code>familiar</code>? - <code>Yes</code>, <code>TCP</code> port <code>21</code> (<code>FTP</code>). From our experience, we will get to know many standard ports and their services, which administrators often try to disguise, but often use “easy to remember” alternatives.</p></li>
</ul>
<p>Based on our guess, we can try to connect to the service using <code>Netcat</code> or an <code>FTP</code> client and try to establish a connection to confirm or disprove our guess.</p>
<p>While connecting to the service, we noticed that the connection took longer than usual (about 15 seconds). There are some services whose connection speed, or response time, can be configured. Now that we know that an FTP server is running on this port, we can deduce the origin of our “failed” scan. We could confirm this again by specifying the minimum <code>probe round trip time</code> (<code>--min-rtt-timeout</code>) in Nmap to 15 or 20 seconds and rerunning the scan.</p>
<hr />
<div id="vulnerability-research-and-analysis" class="section level3 hasAnchor" number="2.5.1">
<h3><span class="header-section-number">2.5.1</span> Vulnerability Research and Analysis<a href="pentest-overview.html#vulnerability-research-and-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>Information Gathering</code> and <code>Vulnerability Research</code> can be considered a part of descriptive analysis. This is where we identify the individual network or system components we are investigating. In <code>Vulnerability Research</code>, we look for known vulnerabilities, exploits, and security holes that have already been discovered and reported. Therefore, if we have identified a version of a service or application through information gathering and found a <a href="https://www.cve.org/ResourcesSupport/FAQs">Common Vulnerabilities and Exposures (CVE)</a>, it is very likely that this vulnerability is still present.</p>
<p>We can find vulnerability disclosures for each component using many different sources. These include, but are not limited to:</p>
<table>
<colgroup>
<col width="39%" />
<col width="38%" />
<col width="21%" />
</colgroup>
<tbody>
<tr class="odd">
<td><a href="https://www.cvedetails.com/">CVEdetails</a></td>
<td><a href="https://www.exploit-db.com/">Exploit DB</a></td>
<td><a href="https://vulners.com/">Vulners</a></td>
</tr>
<tr class="even">
<td><a href="https://packetstormsecurity.com/">Packet Storm Security</a></td>
<td><a href="https://nvd.nist.gov/vuln/search?execution=e2s1">NIST</a></td>
<td></td>
</tr>
</tbody>
</table>
<p>This is where <code>Diagnostic Analysis</code> and <code>Predictive Analysis</code> is used. Once we have found a published vulnerability like this, we can diagnose it to determine what is causing or has caused the vulnerability. Here, we must understand the functionality of the <code>Proof-Of-Concept</code> (<code>POC</code>) code or the application or service itself as best as possible, as many manual configurations by administrators will require some customization for the POC. Each POC is tailored to a specific case that we will also need to adapt to ours in most cases.</p>
<hr />
</div>
<div id="assessment-of-possible-attack-vectors" class="section level3 hasAnchor" number="2.5.2">
<h3><span class="header-section-number">2.5.2</span> Assessment of Possible Attack Vectors<a href="pentest-overview.html#assessment-of-possible-attack-vectors" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>Vulnerability Assessment</code> also includes the actual testing, which is part of <code>Predictive Analysis</code>. In doing so, we analyze historical information and combine it with the current information that we have been able to find out. Whether we have received specific evasion level requirements from our client, we test the services and applications found <code>locally</code> or <code>on the target system</code>. If we have to test covertly and avoid alerts, we should mirror the target system locally as precisely as possible. This means we use the information obtained during our information gathering phase to replicate the target system and then look for vulnerabilities in the locally deployed system.</p>
<hr />
</div>
<div id="the-return" class="section level3 hasAnchor" number="2.5.3">
<h3><span class="header-section-number">2.5.3</span> The Return<a href="pentest-overview.html#the-return" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Suppose we are unable to detect or identify potential vulnerabilities from our analysis. In that case, we will return to the <code>Information Gathering</code> stage and look for more in-depth information than we have gathered so far. It is important to note that these two stages (<code>Information Gathering</code> and <code>Vulnerability Assessment</code>) often overlap, resulting in regular back and forth movement between them. We will see this in many videos where the author is solving an HTB box or some CTF challenge. We should remember that these challenges are often solved as fast as possible, and therefore speed is more important than quality. In a CTF, the goal is to get on the target machine and <code>capture the flags</code> with the highest privileges as fast as possible instead of exposing all potential weaknesses in the system.</p>
<table>
<thead>
<tr class="header">
<th><strong><code>A (real) Penetration Test is not a CTF.</code></strong></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<p>Here the <code>quality</code> and <code>intensity</code> of our penetration test and its analysis have the highest priority because nothing is worse if our client gets successfully hacked via a relatively simple vector that we should have uncovered during our penetration test.</p>
</div>
</div>
<div id="explotation" class="section level2 hasAnchor" number="2.6">
<h2><span class="header-section-number">2.6</span> Explotation<a href="pentest-overview.html#explotation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>During the <code>Exploitation</code> stage, we look for ways that these weaknesses can be adapted to our use case to obtain the desired role (i.e., a foothold, escalated privileges, etc.). If we want to get a reverse shell, we need to modify the PoC to execute the code, so the target system connects back to us over (ideally) an encrypted connection to an IP address we specify. Therefore, the preparation of an exploit is mainly part of the <code>Exploitation</code> stage.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-EX.png" /></p>
<p>These stages should not be strictly separated from each other, as they are closely connected. Nevertheless, it is still important to distinguish which phase we are in and its purpose. Because later, with much more complex processes and much more information, it is very easy to lose track of the steps that have been taken, especially if the penetration test lasts several weeks and covers a massive scope.</p>
<hr />
<div id="prioritization-of-possible-attacks" class="section level3 hasAnchor" number="2.6.1">
<h3><span class="header-section-number">2.6.1</span> Prioritization of Possible Attacks<a href="pentest-overview.html#prioritization-of-possible-attacks" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have found one or two vulnerabilities during the <code>Vulnerability Assessment</code> stage that we can apply to our target network/system, we can prioritize those attacks. Which of those attacks we prioritize higher than the others depends on the following factors:</p>
<ul>
<li>Probability of Success</li>
<li>Complexity</li>
<li>Probability of Damage</li>
</ul>
<p>First, we need to assess the <code>probability of successfully</code> executing a particular attack against the target. <a href="https://nvd.nist.gov/vuln-metrics/cvss">CVSS Scoring</a> can help us here, using the <a href="https://nvd.nist.gov/vuln-metrics/cvss/v3-calculator">NVD calculator</a> better to calculate the specific attacks and their probability of success.</p>
<p><code>Complexity</code> represents the effort of exploiting a specific vulnerability. This is used to estimate how much time, effort, and research is required to execute the attack on the system successfully. Our experience plays an important role here because if we are to carry out an attack that we have never used before, this will logically require much more research and effort since we must understand the attack and the exploit structure in detail before applying it.</p>
<p>Estimating the <code>probability of damage</code> caused by the execution of an exploit plays a critical role, as we must avoid any damage to the target systems. Generally, we do not perform DoS attacks unless our client requires them. Nevertheless, attacking the running services live with exploits that can cause damage to the software or the operating system is something that we must avoid at all times.</p>
<p>In addition, we can assign these factors to a personal point system which will allow the evaluation to be more accurately calculated based on our skills and knowledge:</p>
<div id="prioritization-example" class="section level4 hasAnchor" number="2.6.1.1">
<h4><span class="header-section-number">2.6.1.1</span> Prioritization Example<a href="pentest-overview.html#prioritization-example" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th><strong>Factor</strong></th>
<th><strong>Points</strong></th>
<th><strong>Remote File Inclusion</strong></th>
<th><strong>Buffer Overflow</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1. Probability of Success</td>
<td><code>10</code></td>
<td>10</td>
<td>8</td>
</tr>
<tr class="even">
<td>2. Complexity - Easy</td>
<td><code>5</code></td>
<td>4</td>
<td>0</td>
</tr>
<tr class="odd">
<td>3. Complexity - Medium</td>
<td><code>3</code></td>
<td>0</td>
<td>3</td>
</tr>
<tr class="even">
<td>4. Complexity - Hard</td>
<td><code>1</code></td>
<td>0</td>
<td>0</td>
</tr>
<tr class="odd">
<td>5. Probability of Damage</td>
<td><code>-5</code></td>
<td>0</td>
<td>-5</td>
</tr>
<tr class="even">
<td><strong>Summary</strong></td>
<td><code>max. 15</code></td>
<td>14</td>
<td>6</td>
</tr>
</tbody>
</table>
<p>Based on the above example, we would prefer the <code>remote file inclusion</code> attack. It is easy to prepare and execute and should not cause any damage if approached carefully.</p>
<hr />
</div>
</div>
<div id="preparation-for-the-attack" class="section level3 hasAnchor" number="2.6.2">
<h3><span class="header-section-number">2.6.2</span> Preparation for the Attack<a href="pentest-overview.html#preparation-for-the-attack" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes we will run into a situation where we can’t find high-quality, known working PoC exploit code. Therefore, it may be necessary to reconstruct the exploit locally on a VM representing our target host to figure out precisely what needs to be adapted and changed. Once we have set up the system locally and installed known components to mirror the target environment as closely as possible (i.e., same version numbers for target services/applications), we can start preparing the exploit by following the steps described in the exploit. Then we test this on a locally hosted VM to ensure it works and does not damage significantly. In other situations, we will encounter misconfigurations and vulnerabilities that we see very often and know exactly which tool or exploit to use and whether the exploit or technique is “safe” or can cause instability.</p>
<p>If ever in doubt before running an attack, it’s always best to check with our client, providing them all necessary data so they can make an informed decision on whether they would like us to attempt exploitation or just mark the finding as an issue. If they opt for us not to proceed with exploitation, we can note in the report that it was not confirmed actively but is likely an issue that needs to be addressed. We have a certain amount of leeway during penetration tests and should always use our best judgment if a particular attack seems too risky or could potentially cause a disruption. When in doubt, communicate. Your team lead/manager, the client, will almost certainly prefer extra communication than run into a situation where they are trying to bring a system back online after a failed exploit attempt.</p>
<p>Once we have successfully exploited a target and have initial access (and taken clear notes for our reports and logged all activities in our activity log!), we’ll move on to the post-exploitation and lateral movement stages.</p>
</div>
</div>
<div id="post-explotation" class="section level2 hasAnchor" number="2.7">
<h2><span class="header-section-number">2.7</span> Post-Explotation<a href="pentest-overview.html#post-explotation" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let’s assume we successfully exploited the target system during the <code>Exploitation</code> stage. As with the Exploitation stage, we must again consider whether or not to utilize <code>Evasive Testing</code> in the <code>Post-Exploitation</code> stage. We are already on the system in the post-exploitation phase, making it much more difficult to avoid an alert. The <code>Post-Exploitation</code> stage aims to obtain sensitive and security-relevant information from a local perspective and business-relevant information that, in most cases, requires higher privileges than a standard user. This stage includes the following components:</p>
<table>
<tbody>
<tr class="odd">
<td>Evasive Testing</td>
<td>Information Gathering</td>
</tr>
<tr class="even">
<td>Pillaging</td>
<td>Vulnerability Assessment</td>
</tr>
<tr class="odd">
<td>Privilege Escalation</td>
<td>Persistence</td>
</tr>
<tr class="even">
<td>Data Exfiltration</td>
<td></td>
</tr>
</tbody>
</table>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-POEX.png" /></p>
<hr />
<div id="evasive-testing" class="section level3 hasAnchor" number="2.7.1">
<h3><span class="header-section-number">2.7.1</span> Evasive Testing<a href="pentest-overview.html#evasive-testing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If a skilled administrator monitors the systems, any change or even a single command could trigger an alarm that will give us away. In many cases, we get kicked out of the network, and then threat hunting begins where we are the focus. We may also lose access to a host (that gets quarantined) or a user account (that gets temporarily disabled or the password changed). This penetration test would have failed but succeeded in some ways because the client could detect some actions. We can provide value to the client in this situation by still writing up an entire attack chain and helping them identify gaps in their monitoring and processes where they did not notice our actions. For us, we can study how and why the client detected us and work on improving our evasion skills. Perhaps we did not thoroughly test a payload, or we got careless and ran a command such as <code>net user</code> or <code>whoami</code> that is often monitored by EDR systems and flagged as anomalous activity.</p>
<p> It can often help our clients if we run commands or tools that their defenses stop or detect. It shows them that their defenses are working on some attacks. Keep in mind that we are emulating an attacker, so it’s not always entirely bad for some of the attacks to get noticed. Though when performing evasive testing, our goal should be to go mostly undetected so we can identify any “blind spots” our clients have in their network environments.</p>
<p>Evasive testing is divided into three different categories:</p>
<table>
<thead>
<tr class="header">
<th><strong><code>Evasive</code></strong></th>
<th><strong><code>Hybrid Evasive</code></strong></th>
<th><strong><code>Non-Evasive</code></strong></th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<p>This does not mean that we cannot use all three methods. Suppose our client wants to perform an intrusive penetration test to get as much information as possible and the most in-depth testing results. In that case, we will perform <code>Non-Evasive</code> Testing, as the security measures around the network may limit and even stop us. However, this can also be combined with <code>Evasive</code> testing, using the same commands and methods for non-evasive testing. We can then see if the security measures can identify and respond to the actions performed. In <code>Hybrid-Evasive</code> testing, we can test specific components and security measures that have been defined in advance. This is common when the customer only wants to test specific departments or servers to see if they can withstand the attacks.</p>
<hr />
</div>
<div id="information-gathering-1" class="section level3 hasAnchor" number="2.7.2">
<h3><span class="header-section-number">2.7.2</span> Information Gathering<a href="pentest-overview.html#information-gathering-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since we have gained a new perspective on the system and the network of our target system in the Exploitation stage, we are basically in a new environment. This means we first have to reacquaint ourselves with what we are working with and what options are available. Therefore, in the <code>Post-Exploitation</code> stage, we go through the <code>Information Gathering</code> and <code>Vulnerability Assessment</code> stages again, which we can consider as parts of the current stage. This is because the information we had up to this point was gathered from an external perspective, not an internal one.</p>
<p>From the inside (local) perspective, we have many more possibilities and alternatives to access certain information that is relevant to us. Therefore, the information gathering stage starts all over again from the local perspective. We search and gather as much information as we can. The difference here is that we also enumerate the local network and local services such as printers, database servers, virtualization services, etc. Often we will find shares intended for employees to use to exchange and share data and files. The investigation of these services and network components is called <code>Pillaging</code>.</p>
<hr />
</div>
<div id="pillaging-1" class="section level3 hasAnchor" number="2.7.3">
<h3><span class="header-section-number">2.7.3</span> Pillaging<a href="pentest-overview.html#pillaging-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Pillaging is the stage where we examine the role of the host in the corporate network. We analyze the network configurations, including but not limited to:</p>
<table>
<tbody>
<tr class="odd">
<td>Interfaces</td>
<td>Routing</td>
<td>DNS</td>
</tr>
<tr class="even">
<td>ARP</td>
<td>Services</td>
<td>VPN</td>
</tr>
<tr class="odd">
<td>IP Subnets</td>
<td>Shares</td>
<td>Network Traffic</td>
</tr>
</tbody>
</table>
<p><code>Understanding the role of the system</code> we are on also gives us an excellent understanding of how it communicates with other network devices and its purpose. From this, we can find out, for example, what alternative subdomains exist, whether it has multiple network interfaces, whether there are other hosts with which this system communicates, if admins are connecting to other hosts from it, and if we can potentially reuse credentials or steal an SSH key to further our access or establish persistence, etc. This helps, above all, to get an overview of the network’s structure.</p>
<p>For example, we can use the policies installed on this system to determine what other hosts are using on the network. Because administrators often use particular schemas to secure their network and prevent users from changing anything on it. For example, suppose we discover that the password policy requires only eight characters but no special characters. In that case, we can conclude that we have a relatively high probability of guessing other users’ passwords on this and other systems.</p>
<p>During the pillaging stage, we will also hunt for sensitive data such as passwords on shares, local machines, in scripts, configuration files, password vaults, documents (Excel, Word, .txt files, etc.), and even email.</p>
<p>Our main goals with pillaging are to show the impact of successful exploitation and, if we have not yet reached the goal of the assessment, to find additional data such as passwords that can be inputs to other stages such as lateral movement.</p>
<hr />
</div>
<div id="persistence" class="section level3 hasAnchor" number="2.7.4">
<h3><span class="header-section-number">2.7.4</span> Persistence<a href="pentest-overview.html#persistence" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have an overview of the system, our immediate next step is maintaining access to the exploited host. This way, if the connection is interrupted, we can still access it. This step is essential and often used as the first step before the <code>Information Gathering</code> and <code>Pillaging</code> stages.</p>
<p>We should follow non-standardized sequences because each system is individually configured by a unique administrator who brings their own preferences and knowledge. It is recommended that we <code>work flexibly</code> during this phase <code>and adapt</code> to the circumstances. For example, suppose we have used a buffer overflow attack on a service that is likely to crash it. In that case, we should establish persistence to the system as soon as possible to avoid having to attack the service multiple times and potentially causing a disruption. Often if we lose the connection, we will not be able to access the system in the same way.</p>
<hr />
</div>
<div id="vulnerability-assessment-1" class="section level3 hasAnchor" number="2.7.5">
<h3><span class="header-section-number">2.7.5</span> Vulnerability Assessment<a href="pentest-overview.html#vulnerability-assessment-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>If we can maintain access and have a good overview of the system, we can use the information about the system and its services and any other data stored on it to repeat the <code>Vulnerability Assessment</code> stage, but this time from inside the system. We analyze the information and prioritize it accordingly. The goal we pursue next is the escalation of privileges (if not already in place).</p>
<p>Again, it is essential to distinguish between exploits that can harm the system and attacks against the services that do not cause any disruption. In doing so, we weigh the components we have already gone through in the first Vulnerability Assessment stage.</p>
<hr />
</div>
<div id="privilege-escalation" class="section level3 hasAnchor" number="2.7.6">
<h3><span class="header-section-number">2.7.6</span> Privilege Escalation<a href="pentest-overview.html#privilege-escalation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Privilege escalation is significant, and in most cases, it represents a critical moment that can open many more new doors for us. Getting the highest possible privileges on the system or domain is often crucial. Therefore we want to get the privileges of the <code>root</code> (on <code>Linux-based</code> systems) or the domain <code>administrator</code>/<code>local administrator</code>/<code>SYSTEM</code> (on <code>Windows-based</code> systems) because this will often allow us to move through the entire network without any restrictions.</p>
<p>However, it is essential to remember that the escalation of privileges does not always have to occur locally on the system. We can also obtain stored credentials during the information gathering stage from other users who are members of a higher privileged group. Exploiting these privileges to log in as another user is also part of privilege escalation because we have escalated our privileges (quickly) using the new set of credentials.</p>
<hr />
</div>
<div id="data-exfiltration" class="section level3 hasAnchor" number="2.7.7">
<h3><span class="header-section-number">2.7.7</span> Data Exfiltration<a href="pentest-overview.html#data-exfiltration" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>During the <code>Information Gathering</code> and <code>Pillaging</code> stage, we will often be able to find, among other things, considerable personal information and customer data. Some clients will want to check whether it is possible to exfiltrate these types of data. This means we try to transfer this information from the target system to our own. Security systems such as <code>Data Loss Prevention</code> (<code>DLP</code>) and <code>Endpoint Detection and Response</code> (<code>EDR</code>) help detect and prevent data exfiltration. In addition to <code>Network Monitoring</code>, many companies use encryption on hard drives to prevent external parties from viewing such information. Before exfiltrating any actual data, we should check with the customer and our manager. It can often be enough to create some bogus data (such as fake credit card numbers or social security numbers) and exfiltrate it to our system. That way, the protection mechanisms that look for patterns in data leaving the network will be tested, but we will not be responsible for any live sensitive data on our testing machine.</p>
<p>Companies must adhere to data security regulations depending on the type of data involved. These include, but are not limited to:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th><strong>Type of Information</strong></th>
<th><strong>Security Regulation</strong></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Credit Card Account Information</td>
<td><code>Payment Card Industry</code> (<code>PCI</code>)</td>
</tr>
<tr class="even">
<td>Electronic Patient Health Information</td>
<td><code>Health Insurance Portability and Accountability Act</code> (<code>HIPAA</code>)</td>
</tr>
<tr class="odd">
<td>Consumers Private Banking Information</td>
<td><code>Gramm-Leach-Bliley</code> (<code>GLBA</code>)</td>
</tr>
<tr class="even">
<td>Government Information</td>
<td><code>Federal Information Security Management Act of 2002</code> (<code>FISMA</code>)</td>
</tr>
</tbody>
</table>
<p>Some frameworks companies may follow include:</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td>(<code>NIST</code>) - National Institute of Standards and Technology</td>
<td>(<code>CIS Controls</code>) - Center for Internet Security Controls</td>
</tr>
<tr class="even">
<td>(<code>ISO</code>) - International Organization for Standardization</td>
<td>(<code>PCI-DSS</code>) - The Payment Card Industry Data Security Standard</td>
</tr>
<tr class="odd">
<td>(<code>GDPR</code>) - General Data Protection Regulation</td>
<td>(<code>COBIT</code>) - Control Objectives for Information and Related Technologies</td>
</tr>
<tr class="even">
<td>(<code>FedRAMP</code>) - The Federal Risk and Authorization Management Program</td>
<td>(<code>ITAR</code>) - International Traffic in Arms Regulations</td>
</tr>
<tr class="odd">
<td>(<code>AICPA</code>) - American Institute of Certified Public Accountants</td>
<td>(<code>NERC CIP Standards</code>) - NERC Critical Infrastructure Protection Standards</td>
</tr>
</tbody>
</table>
<p>It is worth familiarizing ourselves with each of these frameworks but what is crucial for us, however, is how we handle this information. For us, the type of data does not have much significance, but the required controls around it do, and as stated previously, we can simulate exfiltrating data from the network as a proof of concept that it is possible. We should check with the client to ensure that their systems are intended to catch the fake data type that we attempt to exfiltrate if we are successful, so we do not misrepresent anything in our report.</p>
<p>It’s a good habit to run a screen recording (along with taking screenshots) as additional evidence for such vital steps. If we only have terminal access, we can display the hostname, IP address, user name, and the corresponding path to the customer file and take a screenshot or screen capture. This helps us prove where the data originated from and that we could remove it from the environment successfully.</p>
<p>If sensitive data like this is found, our client should, of course, be informed immediately. Based on the fact that we could escalate the privileges and exfiltrate personal data, they may want to pause, end, or shift the focus of the penetration test, especially if data exfiltration was the primary goal. However, this is at our client’s discretion, and many will prefer that we keep testing to identify all possible weaknesses in their environment.</p>
<p>Next, we’ll discuss lateral movement, a key stage in the penetration testing process that may use data from our post-exploitation as an input.</p>
</div>
</div>
<div id="lateral-movement" class="section level2 hasAnchor" number="2.8">
<h2><span class="header-section-number">2.8</span> Lateral Movement<a href="pentest-overview.html#lateral-movement" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If everything went well and we were able to penetrate the corporate network (<code>Exploitation</code>) successfully, gather locally stored information, and escalate our privileges (<code>Post-Exploitation</code>), we next enter the <code>Lateral Movement</code> stage. The goal here is that we test what an attacker could do within the entire network. After all, the main goal is not only to successfully exploit a publicly available system but also to get sensitive data or find all ways that an attacker could render the network unusable. One of the most common examples is <a href="https://www.csoonline.com/article/3236183/what-is-ransomware-how-it-works-and-how-to-remove-it.html">ransomware</a>. If a system in the corporate network is infected with ransomware, it can spread across the entire network. It locks down all the systems using various encryption methods, making them unusable for the whole company until a decryption key is entered.</p>
<p>In the most common cases, the company is financially extorted to make a profit. Often, it is only at this moment that companies realize how important IT security is. If they had had a good penetration tester who had tested things (and proper processes and layered defenses in place), they probably could have prevented such a situation and the financial (if not legal) damage. It is often forgotten that in many countries, the <code>CEOs are held liable</code> for not securing their customer data appropriately.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-LA.png" /></p>
<p>In this stage, we want to test how far we can move manually in the entire network and what vulnerabilities we can find from the internal perspective that might be exploited. In doing so, we will again run through several phases:</p>
<ol style="list-style-type: decimal">
<li>Pivoting</li>
<li>Evasive Testing</li>
<li>Information Gathering</li>
<li>Vulnerability Assessment</li>
<li>(Privilege) Exploitation</li>
<li>Post-Exploitation</li>
</ol>
<p>As seen in the graphic above, we can move to this stage from the <code>Exploitation</code> and the <code>Post-Exploitation</code> stage. Sometimes we may not find a direct way to escalate our privileges on the target system itself, but we have ways to move around the network. This is where <code>Lateral Movement</code> comes into play.</p>
<hr />
<div id="pivoting" class="section level3 hasAnchor" number="2.8.1">
<h3><span class="header-section-number">2.8.1</span> Pivoting<a href="pentest-overview.html#pivoting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>In most cases, the system we use will not have the tools to enumerate the internal network efficiently. Some techniques allow us to use the exploited host as a proxy and perform all the scans from our attack machine or VM. In doing so, the exploited system represents and routes all our network requests sent from our attack machine to the internal network and its network components.</p>
<p>In this way, we make sure that non-routable networks (and therefore publicly unreachable) can still be reached. This allows us to scan them for vulnerabilities and penetrate deeper into the network. This process is also known as <code>Pivoting</code> or <code>Tunneling</code>.</p>
<p>An elementary example could be that we have a printer at home that is not accessible from the Internet, but we can send print jobs from our home network. If one of the hosts on our home network has been compromised, it could be leveraged to send these jobs to the printer. Though this is a simple (and unlikely) example, it illustrates the goal of <code>pivoting</code>, which is to access inaccessible systems via an intermediary system.</p>
<hr />
</div>
<div id="evasive-testing-1" class="section level3 hasAnchor" number="2.8.2">
<h3><span class="header-section-number">2.8.2</span> Evasive Testing<a href="pentest-overview.html#evasive-testing-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Also, at this stage, we should consider whether evasive testing is part of the assessment scope. There are different procedures for each tactic, which support us in disguising these requests to not trigger an internal alarm among the administrators and the blue team.</p>
<p>There are many ways to protect against lateral movement, including network (micro) <code>segmentation</code>, <code>threat monitoring</code>, <code>IPS</code>/<code>IDS</code>, <code>EDR</code>, etc. To bypass these efficiently, we need to understand how they work and what they respond to. Then we can adapt and apply methods and strategies that help avoid detection.</p>
<hr />
</div>
<div id="information-gathering-2" class="section level3 hasAnchor" number="2.8.3">
<h3><span class="header-section-number">2.8.3</span> Information Gathering<a href="pentest-overview.html#information-gathering-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before we target the internal network, we must first get an <code>overview</code> of which systems and how many can be reached from our system. This information may already be available to us from the last post-exploitation stage, where we took a closer look at the settings and configurations of the system.</p>
<p>We return to the Information Gathering stage, but this time, we do it from inside the network with a different view of it. Once we have discovered all hosts and servers, we can enumerate them individually.</p>
<hr />
</div>
<div id="vulnerability-assessment-2" class="section level3 hasAnchor" number="2.8.4">
<h3><span class="header-section-number">2.8.4</span> Vulnerability Assessment<a href="pentest-overview.html#vulnerability-assessment-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vulnerability assessment from the inside of the network differs from the previous procedures. This is because far more errors occur inside a network than on hosts and servers exposed to the Internet. Here, the <code>groups</code> to which one has been assigned and the <code>rights</code> to different system components play an essential role. In addition, it is common for users to share information and documents and work on them together.</p>
<p>This type of information is of particular interest to us when planning our attacks. For example, if we compromise a user account assigned to a developer group, we may gain access to most of the resources used by company developers. This will likely provide us with crucial internal information about the systems and could help us to identify flaws or further our access.</p>
<hr />
</div>
<div id="privilege-exploitation" class="section level3 hasAnchor" number="2.8.5">
<h3><span class="header-section-number">2.8.5</span> (Privilege) Exploitation<a href="pentest-overview.html#privilege-exploitation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have found and prioritized these paths, we can jump to the step where we use these to access the other systems. We often find ways to crack passwords and hashes and gain higher privileges. Another standard method is to use our existing credentials on other systems. There will also be situations where we do not even have to crack the hashes but can use them directly. For example, we can use the tool <a href="https://github.com/lgandx/Responder">Responder</a> to intercept NTLMv2 hashes. If we can intercept a hash from an administrator, then we can use the <code>pass-the-hash</code> technique to log in as that administrator (in most cases) on multiple hosts and servers.</p>
<p>After all, the <code>Lateral Movement</code> stage aims to move through the internal network. Existing data and information can be versatile and often used in many ways.</p>
<hr />
</div>
<div id="post-exploitation" class="section level3 hasAnchor" number="2.8.6">
<h3><span class="header-section-number">2.8.6</span> Post-Exploitation<a href="pentest-overview.html#post-exploitation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have reached one or more hosts or servers, we go through the steps of the post-exploitation stage again for each system. Here we again collect system information, data from created users, and business information that can be presented as evidence. However, we must again consider how this different information must be handled and the rules defined around sensitive data in the contract.</p>
<p>Finally, we are ready to move on to the <code>Proof-of-Concept</code> phase to show off our hard work and help our client, and those responsible for remediation efficiently reproduce our results.</p>
</div>
</div>
<div id="proof-of-concept" class="section level2 hasAnchor" number="2.9">
<h2><span class="header-section-number">2.9</span> Proof-of-Concept<a href="pentest-overview.html#proof-of-concept" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>Proof of Concept</code> (<code>PoC</code>) or <code>Proof of Principle</code> is a project management term. In project management, it serves as proof that a project is feasible in principle. The criteria for this can lie in technical or business factors. Therefore, it is the basis for further work, in our case, the necessary steps to secure the corporate network by confirming the discovered vulnerabilities. In other words, it serves as a decision-making basis for the further course of action. At the same time, it enables risks to be identified and minimized.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process-POC.png" /></p>
<p>This project step is often integrated into the development process for new application software (prototyping) or IT security solutions. For us in information security, this is where we prove vulnerabilities in operating systems or application software. We use this PoC to prove that a security problem exists so that the developers or administrators can validate it, reproduce it, see the impact, and test their remediation efforts. One of the most common examples used to prove software vulnerabilities is executing the calculator (calc.exe on Windows) on the target system. In principle, the PoC also assesses the probability of success of system access from actual exploitation.</p>
<p>A <code>PoC</code> can have many different representations. For example, <code>documentation</code> of the vulnerabilities found can also constitute a PoC. The more practical version of a PoC is a <code>script</code> or <code>code</code> that automatically exploits the vulnerabilities found. This demonstrates the flawless exploitation of the vulnerabilities. This variant is straightforward for an administrator or developer because they can see what steps our script takes to exploit the vulnerability.</p>
<p>However, there is one significant disadvantage that has occurred from time to time. Once the administrators and developers have received such a script from us, it is easy for them to “fight” against our script. They focus on changing the systems so that the script we created no longer works. The important thing is that the script is only <code>one way</code> of exploiting a given vulnerability. Therefore, working against our script instead of with it and modifying and securing the systems so that our script no longer works does not mean that the information obtained from the script cannot be obtained in another way. It is an important aspect that should be discussed with the administrators and developers and explicitly mentioned and pointed out.</p>
<p>The report they receive from us should help them see the entire picture, focus on the broader issues, and provide clear remediation advice. Including an attack chain walkthrough in the event of domain compromise during an internal is a great way to show how multiple flaws can be combined and how fixing one flaw will break the chain, but the other flaws will still exist. If these are not also fixed, there may be another path to get to the point where the attack chain was remediated and continue onwards. We should also drive this point home during our report review meeting.</p>
<p>For example, if a user uses the password <code>Password123</code>, the underlying vulnerability is not the password but the <code>password policy</code>. If a Domain Admin is found to be using that password and it is changed, that one account will now have a stronger password, but the problem of weak passwords will likely still be endemic within the organization.</p>
<p>If the password policy followed high standards, the user would not be able to use such a weak password. Administrators and developers are responsible for the functionality and the quality of their systems and applications. Furthermore, high quality stands for high standards, which we should emphasize through our remediation recommendations.</p>
</div>
<div id="post-engagement" class="section level2 hasAnchor" number="2.10">
<h2><span class="header-section-number">2.10</span> Post-Engagement<a href="pentest-overview.html#post-engagement" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Much like there is considerable legwork before an engagement officially starts (when testing begins), we must perform many activities (many of them contractually binding) after our scans, exploitation, lateral movement, and post-exploitation activities are complete. No two engagements are the same, so these activities may differ slightly but generally must be performed to close out an engagement fully.</p>
<p><img src="https://academy.hackthebox.com/storage/modules/90/0-PT-Process.png" /></p>
<hr />
<div id="cleanup" class="section level3 hasAnchor" number="2.10.1">
<h3><span class="header-section-number">2.10.1</span> Cleanup<a href="pentest-overview.html#cleanup" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once testing is complete, we should perform any necessary cleanup, such as deleting tools/scripts uploaded to target systems, reverting any (minor) configuration changes we may have made, etc. We should have detailed notes of all of our activities, making any cleanup activities easy and efficient. If we cannot access a system where an artifact needs to be deleted, or another change reverted, we should alert the client and list these issues in the report appendices. Even if we can remove any uploaded files and revert changes (such as adding a local admin account), we should document these changes in our report appendices in case the client receives alerts that they need to follow up on and confirm that the activity in question was part of our sanctioned testing.</p>
<hr />
</div>
<div id="documentation-and-reporting" class="section level3 hasAnchor" number="2.10.2">
<h3><span class="header-section-number">2.10.2</span> Documentation and Reporting<a href="pentest-overview.html#documentation-and-reporting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Before completing the assessment and disconnecting from the client’s internal network or sending “stop” notification emails to signal the end of testing (meaning no more interaction with the client’s hosts), we must make sure to have adequate documentation for all findings that we plan to include in our report. This includes command output, screenshots, a listing of affected hosts, and anything else specific to the client environment or finding. We should also make sure that we have retrieved all scan and log output if the client hosted a VM in their infrastructure for an internal penetration test and any other data that may be included as part of the report or as supplementary documentation. We should not keep any Personal Identifiable Information (PII), potentially incriminating info, or other sensitive data we came across throughout testing.</p>
<p>We should already have a detailed list of the findings we will include in the report and all necessary details to tailor the findings to the client’s environment. Our report deliverable (which is covered in detail in the <a href="https://academy.hackthebox.com/module/details/162">Documentation &amp; Reporting</a> module) should consist of the following:</p>
<ul>
<li>An attack chain (in the event of full internal compromise or external to internal access) detailing steps taken to achieve compromise</li>
<li>A strong executive summary that a non-technical audience can understand</li>
<li>Detailed findings specific to the client’s environment that include a risk rating, finding impact, remediation recommendations, and high-quality external references related to the issue</li>
<li>Adequate steps to reproduce each finding so the team responsible for remediation can understand and test the issue while putting fixes in place</li>
<li>Near, medium, and long-term recommendations specific to the environment</li>
<li>Appendices which include information such as the target scope, OSINT data (if relevant to the engagement), password cracking analysis (if relevant), discovered ports/services, compromised hosts, compromised accounts, files transferred to client-owned systems, any account creation/system modifications, an Active Directory security analysis (if relevant), relevant scan data/supplementary documentation, and any other information necessary to explain a specific finding or recommendation further</li>
</ul>
<p>At this stage, we will create a draft report that is the first deliverable our client will receive. From here, they will be able to comment on the report and ask for any necessary clarification/modifications.</p>
<hr />
</div>
<div id="report-review-meeting" class="section level3 hasAnchor" number="2.10.3">
<h3><span class="header-section-number">2.10.3</span> Report Review Meeting<a href="pentest-overview.html#report-review-meeting" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once the draft report is delivered, and the client has had a chance to distribute it internally and review it in-depth, it is customary to hold a report review meeting to walk through the assessment results. The report review meeting typically includes the same folks from the client and the firm performing the assessment. Depending on the types of findings, the client may bring in additional technical subject matter experts if the finding is related to a system or application they are responsible for. Typically we will not read the entire report word for word but walk through each finding briefly and give an explanation from our own perspective/experience. The client will have the opportunity to ask questions about anything in the report, ask for clarifications, or point out issues that need to be corrected. Often the client will come with a list of questions about specific findings and will not want to cover every finding in detail (such as low-risk ones).</p>
<hr />
</div>
<div id="deliverable-acceptance" class="section level3 hasAnchor" number="2.10.4">
<h3><span class="header-section-number">2.10.4</span> Deliverable Acceptance<a href="pentest-overview.html#deliverable-acceptance" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The Scope of Work should clearly define the acceptance of any project deliverables. In penetration test assessments, generally, we deliver a report marked <code>DRAFT</code> and give the client a chance to review and comment. Once the client has submitted feedback (i.e., management responses, requests for clarification/changes, additional evidence, etc.) either by email or (ideally) during a report review meeting, we can issue them a new version of the report marked <code>FINAL</code>. Some audit firms that clients may be beholden to will not accept a penetration test report with a <code>DRAFT</code> designation. Other companies will not care, but keeping a uniform approach across all customers is best.</p>
<hr />
</div>
<div id="post-remediation-testing" class="section level3 hasAnchor" number="2.10.5">
<h3><span class="header-section-number">2.10.5</span> Post-Remediation Testing<a href="pentest-overview.html#post-remediation-testing" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Most engagements include post-remediation testing as part of the project’s total cost. In this phase, we will review any documentation provided by the client showing evidence of remediation or just a list of remediated findings. We will need to reaccess the target environment and test each issue to ensure it was appropriately remediated. We will issue a post-remediation report that clearly shows the state of the environment before and after post-remediation testing. For example, we may include a table such as:</p>
<table>
<thead>
<tr class="header">
<th>#</th>
<th>Finding Severity</th>
<th>Finding Title</th>
<th>Status</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>1</td>
<td>High</td>
<td>SQL Injection</td>
<td>Remediated</td>
</tr>
<tr class="even">
<td>2</td>
<td>High</td>
<td>Broken Authentication</td>
<td>Remediated</td>
</tr>
<tr class="odd">
<td>3</td>
<td>High</td>
<td>Unrestricted File Upload</td>
<td>Remediated</td>
</tr>
<tr class="even">
<td>4</td>
<td>High</td>
<td>Inadequate Web and Egress Filtering</td>
<td>Not Remediated</td>
</tr>
<tr class="odd">
<td>5</td>
<td>Medium</td>
<td>SMB Signing Not Enabled</td>
<td>Not Remediated</td>
</tr>
<tr class="even">
<td>6</td>
<td>Low</td>
<td>Directory Listing Enabled</td>
<td>Not Remediated</td>
</tr>
</tbody>
</table>
<p>For each finding (where possible), we will want to show evidence that the issue is no longer present in the environment through scan output or proof that the original exploitation techniques fail.</p>
<hr />
</div>
<div id="role-of-the-pentester-in-remediation" class="section level3 hasAnchor" number="2.10.6">
<h3><span class="header-section-number">2.10.6</span> Role of the Pentester in Remediation<a href="pentest-overview.html#role-of-the-pentester-in-remediation" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Since a penetration test is essentially an audit, we must remain impartial third parties and not perform remediation on our findings (such as fixing code, patching systems, or making configuration changes in Active Directory). We must maintain a degree of independence and can serve as trusted advisors by giving general remediation advice on how a specific issue could be fixed or be available to explain further/demonstrate a finding so the team assigned to remediate it has a better understanding. We should not be implementing changes ourselves or even giving precise remediation advice (i.e., for SQL Injection, we may say “sanitize user input” but not give the client a rewritten piece of code). This will help maintain the assessment’s integrity and not introduce any potential conflict of interest into the process.</p>
<hr />
</div>
<div id="data-retention" class="section level3 hasAnchor" number="2.10.7">
<h3><span class="header-section-number">2.10.7</span> Data Retention<a href="pentest-overview.html#data-retention" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>After a penetration test concludes, we will have a considerable amount of client-specific data such as scan results, log output, credentials, screenshots, and more. Data retention and destruction requirements may differ from country to country and firm to firm, and procedures surrounding each should be outlined clearly in the contract language of the Scope of Work and the Rules of Engagement. Per <a href="https://www.pcisecuritystandards.org/documents/Penetration_Testing_Guidance_March_2015.pdf">Penetration Testing Guidance</a> from the PCI Data Security Standard (PCI DSS):</p>
<p>“While there are currently no PCI DSS requirements regarding the retention of evidence collected by the penetration tester, it is a recommended best practice that the tester retain such evidence (whether internal to the organization or a third-party provider) for a period of time while considering any local, regional, or company laws that must be followed for the retention of evidence. This evidence should be available upon request from the target entity or other authorized entities as defined in the rules of engagement.”</p>
<p>We should retain evidence for some time after the penetration test in case questions arise about specific findings or to assist with retesting “closed” findings after the client has performed remediation activities. Any data retained after the assessment should be stored in a secure location owned and controlled by the firm and encrypted at rest. All data should be wiped from tester systems at the conclusion of an assessment. A new virtual machine specific to the client in question should be created for any post-remediation testing or investigation of findings related to client inquiries.</p>
<hr />
</div>
<div id="close-out" class="section level3 hasAnchor" number="2.10.8">
<h3><span class="header-section-number">2.10.8</span> Close Out<a href="pentest-overview.html#close-out" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Once we have delivered the final report, assisted the client with questions regarding remediation, and performed post-remediation testing/issued a new report, we can finally close the project. At this stage, we should ensure that any systems used to connect to the client’s systems or process data have been wiped or destroyed and that any artifacts leftover from the engagement are stored securely (encrypted) per our firm’s policy and per contractual obligations to our client. The final steps would be invoicing the client and collecting payment for services rendered. Finally, it is always good to follow up with a post-assessment client satisfaction survey so the team and management, in particular, can see what went well during the engagement and what could be improved upon from a company process standpoint and the individual consultant assigned to the project. Discussions for follow-on work may arise in the weeks or months after if the client was pleased with our work and day-to-day interactions.</p>
<p>As we continually grow our technical skillset, we should always look for ways to improve our soft skills and become more well-rounded professional consultants. In the end, the <code>client will usually remember interactions</code> during the assessment, communication, and how they were treated/valued by the firm they engage, <code>not the fancy exploit chain the pentester pulled off to pwn their systems</code>. Take this time to self-reflect and work on continuous improvement in all aspects of your role as a professional penetration tester.</p>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="index.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="network-enumeration.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/lukencito/hacking-notes/edit/main/02-penprocess.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/lukencito/hacking-notes/blob/main/02-penprocess.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
